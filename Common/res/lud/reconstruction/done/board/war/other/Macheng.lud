(define "RemoveEnemyPiece" 
    (move
        Remove
        (sites Occupied by:Next container:"Board") 
    )
)

(define "IfLine3MoveAgain" 
    (if 
        (is Line 3 Orthogonal exact:True) 
        (moveAgain)
    )
)

(define "Custodial" 
    (custodial 
        (from (last To)) 
        Orthogonal
        (between (max 1) if:("IsEnemyAt" (between)) (apply (remove (between))))
        (to if:("IsFriendAt" (to))) 
    )
)

(define "Intervene"
    (intervene 
        (from (last To))
        Orthogonal
        (to 
            if:("IsEnemyAt" (to))
            (apply (remove (to)))
        )
    )		
)

//------------------------------------------------------------------------------

(game "Macheng"
    <Variant>
)

//------------------------------------------------------------------------------

(option "Variant" <Variant> args:{ <variant> }
    {
    (item "Macheng (Ludii 1)" <
        
        (players 2)
        
        (equipment { 
            (board 
                (concentric Square rings:3 joinCorners:True)
            use:Vertex)
            
            (hand Each)
            
            (piece "Marker" Each 
                (move Step 
                    (to if:
                        (is Empty 
                            (to)
                        )
                    )
                    
                    (then 
                        (and { 
                            (custodial 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (between 
                                    (max 1)
                                    if:
                                    (is Enemy 
                                        (who at:
                                            (between)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (between)
                                        )
                                    )
                                )
                                
                                (to if:
                                    (is Friend 
                                        (who at:
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (intervene 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (to if:
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (if 
                                (is Line 3 Orthogonal exact:True)
                                
                                (moveAgain)
                            )
                            }
                        )
                    )
                )
            )
            }
        )
        
        (rules 
            (start 
                (place "Marker" "Hand" count:9)
            )
            phases:{ 
            (phase "Placement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (move 
                            (from 
                                (handSite Mover)
                            )
                            
                            (to 
                                (sites Empty)
                            )
                            
                            (then 
                                (and { 
                                    (custodial 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (between 
                                            (max 1)
                                            if:
                                            (is Enemy 
                                                (who at:
                                                    (between)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (between)
                                                )
                                            )
                                        )
                                        
                                        (to if:
                                            (is Friend 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (intervene 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (to if:
                                            (is Enemy 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (is Line 3 Orthogonal exact:True)
                                        
                                        (moveAgain)
                                    )
                                    }
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (all Sites 
                        (sites Hand Mover)
                        if:
                        (= 0 
                            (count Cell at:
                                (site)
                            )
                        )
                    )
                "Movement")
            )
            
            (phase "Movement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (forEach Piece)
                    )
                )
            )
            }
            
            (end 
                (if 
                    (no Moves Next)
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Macheng (Ludii 1) ruleset.")
    
    (item "Macheng (Ludii 2)" <
        
        (players 2)
        
        (equipment { 
            (board 
                (concentric Square rings:3 joinCorners:True)
            use:Vertex)
            
            (hand Each)
            
            (piece "Marker" Each 
                (move Step 
                    (to if:
                        (is Empty 
                            (to)
                        )
                    )
                    
                    (then 
                        (and { 
                            (custodial 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (between 
                                    (max 1)
                                    if:
                                    (is Enemy 
                                        (who at:
                                            (between)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (between)
                                        )
                                    )
                                )
                                
                                (to if:
                                    (is Friend 
                                        (who at:
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (intervene 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (to if:
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (if 
                                (is Line 3 Orthogonal exact:True)
                                
                                (moveAgain)
                            )
                            }
                        )
                    )
                )
            )
            }
        )
        
        (rules 
            (start 
                (place "Marker" "Hand" count:9)
            )
            phases:{ 
            (phase "Placement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (move 
                            (from 
                                (handSite Mover)
                            )
                            
                            (to 
                                (sites Empty)
                            )
                            
                            (then 
                                (and { 
                                    (custodial 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (between 
                                            (max 1)
                                            if:
                                            (is Enemy 
                                                (who at:
                                                    (between)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (between)
                                                )
                                            )
                                        )
                                        
                                        (to if:
                                            (is Friend 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (intervene 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (to if:
                                            (is Enemy 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (is Line 3 Orthogonal exact:True)
                                        
                                        (moveAgain)
                                    )
                                    }
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (all Sites 
                        (sites Hand Mover)
                        if:
                        (= 0 
                            (count Cell at:
                                (site)
                            )
                        )
                    )
                "Movement")
            )
            
            (phase "Movement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (forEach Piece)
                    )
                )
            )
            }
            
            (end 
                (if 
                    (or 
                        (no Moves Next)
                        
                        (<= 
                            (count Pieces Next)
                        2)
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Macheng (Ludii 2) ruleset.")
    
    (item "Macheng (Ludii 3)" <
        
        (players 2)
        
        (equipment { 
            (board 
                (concentric Square rings:3)
            use:Vertex)
            
            (hand Each)
            
            (piece "Marker" Each 
                (move Step 
                    (to if:
                        (is Empty 
                            (to)
                        )
                    )
                    
                    (then 
                        (and { 
                            (custodial 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (between 
                                    (max 1)
                                    if:
                                    (is Enemy 
                                        (who at:
                                            (between)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (between)
                                        )
                                    )
                                )
                                
                                (to if:
                                    (is Friend 
                                        (who at:
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (intervene 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (to if:
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (if 
                                (is Line 3 Orthogonal exact:True)
                                
                                (moveAgain)
                            )
                            }
                        )
                    )
                )
            )
            }
        )
        
        (rules 
            (start 
                (place "Marker" "Hand" count:9)
            )
            phases:{ 
            (phase "Placement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (move 
                            (from 
                                (handSite Mover)
                            )
                            
                            (to 
                                (sites Empty)
                            )
                            
                            (then 
                                (and { 
                                    (custodial 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (between 
                                            (max 1)
                                            if:
                                            (is Enemy 
                                                (who at:
                                                    (between)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (between)
                                                )
                                            )
                                        )
                                        
                                        (to if:
                                            (is Friend 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (intervene 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (to if:
                                            (is Enemy 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (is Line 3 Orthogonal exact:True)
                                        
                                        (moveAgain)
                                    )
                                    }
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (all Sites 
                        (sites Hand Mover)
                        if:
                        (= 0 
                            (count Cell at:
                                (site)
                            )
                        )
                    )
                "Movement")
            )
            
            (phase "Movement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (forEach Piece)
                    )
                )
            )
            }
            
            (end 
                (if 
                    (no Moves Next)
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Macheng (Ludii 3) ruleset.")
    
    (item "Macheng (Ludii 4)" <
        
        (players 2)
        
        (equipment { 
            (board 
                (concentric Square rings:3 joinCorners:True)
            use:Vertex)
            
            (hand Each)
            
            (piece "Marker" Each 
                (move Step 
                    (to if:
                        (is Empty 
                            (to)
                        )
                    )
                    
                    (then 
                        (and { 
                            (custodial 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (between 
                                    (max 1)
                                    if:
                                    (is Enemy 
                                        (who at:
                                            (between)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (between)
                                        )
                                    )
                                )
                                
                                (to if:
                                    (is Friend 
                                        (who at:
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (intervene 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (to if:
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (if 
                                (is Line 3 Orthogonal exact:True)
                                
                                (moveAgain)
                            )
                            }
                        )
                    )
                )
            )
            }
        )
        
        (rules 
            (start 
                (place "Marker" "Hand" count:9)
            )
            phases:{ 
            (phase "Placement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (move 
                            (from 
                                (handSite Mover)
                            )
                            
                            (to 
                                (sites Empty)
                            )
                            
                            (then 
                                (and { 
                                    (custodial 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (between 
                                            (max 1)
                                            if:
                                            (is Enemy 
                                                (who at:
                                                    (between)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (between)
                                                )
                                            )
                                        )
                                        
                                        (to if:
                                            (is Friend 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (intervene 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (to if:
                                            (is Enemy 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (is Line 3 Orthogonal exact:True)
                                        
                                        (moveAgain)
                                    )
                                    }
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (all Sites 
                        (sites Hand Mover)
                        if:
                        (= 0 
                            (count Cell at:
                                (site)
                            )
                        )
                    )
                "Movement")
            )
            
            (phase "Movement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (forEach Piece)
                    )
                )
            )
            }
            
            (end { 
                (if 
                    (no Moves P2)
                    
                    (result P1 Win)
                )
                
                (if 
                    (< 
                        (count Pieces P1)
                    2)
                    
                    (result P2 Win)
                )
                }
            )
        )
        
    > "The Macheng (Ludii 4) ruleset.")
    
    (item "Macheng (Ludii 5)" <
        
        (players 2)
        
        (equipment { 
            (board 
                (concentric Square rings:3)
            use:Vertex)
            
            (hand Each)
            
            (piece "Marker" Each 
                (move Step 
                    (to if:
                        (is Empty 
                            (to)
                        )
                    )
                    
                    (then 
                        (and { 
                            (custodial 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (between 
                                    (max 1)
                                    if:
                                    (is Enemy 
                                        (who at:
                                            (between)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (between)
                                        )
                                    )
                                )
                                
                                (to if:
                                    (is Friend 
                                        (who at:
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (intervene 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (to if:
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (if 
                                (is Line 3 Orthogonal exact:True)
                                
                                (moveAgain)
                            )
                            }
                        )
                    )
                )
            )
            }
        )
        
        (rules 
            (start 
                (place "Marker" "Hand" count:9)
            )
            phases:{ 
            (phase "Placement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (move 
                            (from 
                                (handSite Mover)
                            )
                            
                            (to 
                                (sites Empty)
                            )
                            
                            (then 
                                (and { 
                                    (custodial 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (between 
                                            (max 1)
                                            if:
                                            (is Enemy 
                                                (who at:
                                                    (between)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (between)
                                                )
                                            )
                                        )
                                        
                                        (to if:
                                            (is Friend 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (intervene 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (to if:
                                            (is Enemy 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (is Line 3 Orthogonal exact:True)
                                        
                                        (moveAgain)
                                    )
                                    }
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (all Sites 
                        (sites Hand Mover)
                        if:
                        (= 0 
                            (count Cell at:
                                (site)
                            )
                        )
                    )
                "Movement")
            )
            
            (phase "Movement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (forEach Piece)
                    )
                )
            )
            }
            
            (end 
                (if 
                    (or 
                        (no Moves Next)
                        
                        (<= 
                            (count Pieces Next)
                        2)
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Macheng (Ludii 5) ruleset.")
    
    (item "Macheng (Ludii 6)" <
        
        (players 2)
        
        (equipment { 
            (board 
                (concentric Square rings:3 joinCorners:True)
            use:Vertex)
            
            (hand Each)
            
            (piece "Marker" Each 
                (move Step 
                    (to if:
                        (is Empty 
                            (to)
                        )
                    )
                    
                    (then 
                        (and { 
                            (custodial 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (between 
                                    (max 1)
                                    if:
                                    (is Enemy 
                                        (who at:
                                            (between)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (between)
                                        )
                                    )
                                )
                                
                                (to if:
                                    (is Friend 
                                        (who at:
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (intervene 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (to if:
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (if 
                                (is Line 3 Orthogonal exact:True)
                                
                                (moveAgain)
                            )
                            }
                        )
                    )
                )
            )
            }
        )
        
        (rules 
            (start 
                (place "Marker" "Hand" count:9)
            )
            phases:{ 
            (phase "Placement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (move 
                            (from 
                                (handSite Mover)
                            )
                            
                            (to 
                                (sites Empty)
                            )
                            
                            (then 
                                (and { 
                                    (custodial 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (between 
                                            (max 1)
                                            if:
                                            (is Enemy 
                                                (who at:
                                                    (between)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (between)
                                                )
                                            )
                                        )
                                        
                                        (to if:
                                            (is Friend 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (intervene 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (to if:
                                            (is Enemy 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (is Line 3 Orthogonal exact:True)
                                        
                                        (moveAgain)
                                    )
                                    }
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (all Sites 
                        (sites Hand Mover)
                        if:
                        (= 0 
                            (count Cell at:
                                (site)
                            )
                        )
                    )
                "Movement")
            )
            
            (phase "Movement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (forEach Piece)
                    )
                )
            )
            }
            
            (end { 
                (if 
                    (no Moves P1)
                    
                    (result P2 Win)
                )
                
                (if 
                    (< 
                        (count Pieces P2)
                    2)
                    
                    (result P1 Win)
                )
                }
            )
        )
        
    > "The Macheng (Ludii 6) ruleset.")
    
    (item "Macheng (Ludii 7)" <
        
        (players 2)
        
        (equipment { 
            (board 
                (concentric Square rings:3)
            use:Vertex)
            
            (hand Each)
            
            (piece "Marker" Each 
                (move Step 
                    (to if:
                        (is Empty 
                            (to)
                        )
                    )
                    
                    (then 
                        (and { 
                            (custodial 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (between 
                                    (max 1)
                                    if:
                                    (is Enemy 
                                        (who at:
                                            (between)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (between)
                                        )
                                    )
                                )
                                
                                (to if:
                                    (is Friend 
                                        (who at:
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (intervene 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (to if:
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (if 
                                (is Line 3 Orthogonal exact:True)
                                
                                (moveAgain)
                            )
                            }
                        )
                    )
                )
            )
            }
        )
        
        (rules 
            (start 
                (place "Marker" "Hand" count:9)
            )
            phases:{ 
            (phase "Placement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (move 
                            (from 
                                (handSite Mover)
                            )
                            
                            (to 
                                (sites Empty)
                            )
                            
                            (then 
                                (and { 
                                    (custodial 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (between 
                                            (max 1)
                                            if:
                                            (is Enemy 
                                                (who at:
                                                    (between)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (between)
                                                )
                                            )
                                        )
                                        
                                        (to if:
                                            (is Friend 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (intervene 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (to if:
                                            (is Enemy 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (is Line 3 Orthogonal exact:True)
                                        
                                        (moveAgain)
                                    )
                                    }
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (all Sites 
                        (sites Hand Mover)
                        if:
                        (= 0 
                            (count Cell at:
                                (site)
                            )
                        )
                    )
                "Movement")
            )
            
            (phase "Movement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (forEach Piece)
                    )
                )
            )
            }
            
            (end { 
                (if 
                    (no Moves P2)
                    
                    (result P1 Win)
                )
                
                (if 
                    (< 
                        (count Pieces P1)
                    2)
                    
                    (result P2 Win)
                )
                }
            )
        )
        
    > "The Macheng (Ludii 7) ruleset.")
    
    (item "Macheng (Ludii 8)" <
        
        (players 2)
        
        (equipment { 
            (board 
                (concentric Square rings:3 joinCorners:True)
            use:Vertex)
            
            (hand Each)
            
            (piece "Marker" Each 
                (move Step 
                    (to if:
                        (is Empty 
                            (to)
                        )
                    )
                    
                    (then 
                        (and { 
                            (custodial 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (between 
                                    (max 1)
                                    if:
                                    (is Enemy 
                                        (who at:
                                            (between)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (between)
                                        )
                                    )
                                )
                                
                                (to if:
                                    (is Friend 
                                        (who at:
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (intervene 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (to if:
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (if 
                                (is Line 3 Orthogonal exact:True)
                                
                                (moveAgain)
                            )
                            }
                        )
                    )
                )
            )
            }
        )
        
        (rules 
            (start 
                (place "Marker" "Hand" count:12)
            )
            phases:{ 
            (phase "Placement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (move 
                            (from 
                                (handSite Mover)
                            )
                            
                            (to 
                                (sites Empty)
                            )
                            
                            (then 
                                (and { 
                                    (custodial 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (between 
                                            (max 1)
                                            if:
                                            (is Enemy 
                                                (who at:
                                                    (between)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (between)
                                                )
                                            )
                                        )
                                        
                                        (to if:
                                            (is Friend 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (intervene 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (to if:
                                            (is Enemy 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (is Line 3 Orthogonal exact:True)
                                        
                                        (moveAgain)
                                    )
                                    }
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (all Sites 
                        (sites Hand Mover)
                        if:
                        (= 0 
                            (count Cell at:
                                (site)
                            )
                        )
                    )
                "Movement")
            )
            
            (phase "Movement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (forEach Piece)
                    )
                )
            )
            }
            
            (end { 
                (if 
                    (no Moves P2)
                    
                    (result P1 Win)
                )
                
                (if 
                    (< 
                        (count Pieces P1)
                    2)
                    
                    (result P2 Win)
                )
                }
            )
        )
        
    > "The Macheng (Ludii 8) ruleset.")
    
    (item "Macheng (Ludii 9)" <
        
        (players 2)
        
        (equipment { 
            (board 
                (concentric Square rings:3)
            use:Vertex)
            
            (hand Each)
            
            (piece "Marker" Each 
                (move Step 
                    (to if:
                        (is Empty 
                            (to)
                        )
                    )
                    
                    (then 
                        (and { 
                            (custodial 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (between 
                                    (max 1)
                                    if:
                                    (is Enemy 
                                        (who at:
                                            (between)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (between)
                                        )
                                    )
                                )
                                
                                (to if:
                                    (is Friend 
                                        (who at:
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (intervene 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (to if:
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (if 
                                (is Line 3 Orthogonal exact:True)
                                
                                (moveAgain)
                            )
                            }
                        )
                    )
                )
            )
            }
        )
        
        (rules 
            (start 
                (place "Marker" "Hand" count:9)
            )
            phases:{ 
            (phase "Placement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (move 
                            (from 
                                (handSite Mover)
                            )
                            
                            (to 
                                (sites Empty)
                            )
                            
                            (then 
                                (and { 
                                    (custodial 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (between 
                                            (max 1)
                                            if:
                                            (is Enemy 
                                                (who at:
                                                    (between)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (between)
                                                )
                                            )
                                        )
                                        
                                        (to if:
                                            (is Friend 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (intervene 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (to if:
                                            (is Enemy 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (is Line 3 Orthogonal exact:True)
                                        
                                        (moveAgain)
                                    )
                                    }
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (all Sites 
                        (sites Hand Mover)
                        if:
                        (= 0 
                            (count Cell at:
                                (site)
                            )
                        )
                    )
                "Movement")
            )
            
            (phase "Movement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (forEach Piece)
                    )
                )
            )
            }
            
            (end { 
                (if 
                    (no Moves P1)
                    
                    (result P2 Win)
                )
                
                (if 
                    (< 
                        (count Pieces P2)
                    2)
                    
                    (result P1 Win)
                )
                }
            )
        )
        
    > "The Macheng (Ludii 9) ruleset.")
    
    (item "Macheng (Ludii 10)" <
        
        (players 2)
        
        (equipment { 
            (board 
                (concentric Square rings:3 joinCorners:True)
            use:Vertex)
            
            (hand Each)
            
            (piece "Marker" Each 
                (move Step 
                    (to if:
                        (is Empty 
                            (to)
                        )
                    )
                    
                    (then 
                        (and { 
                            (custodial 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (between 
                                    (max 1)
                                    if:
                                    (is Enemy 
                                        (who at:
                                            (between)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (between)
                                        )
                                    )
                                )
                                
                                (to if:
                                    (is Friend 
                                        (who at:
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (intervene 
                                (from 
                                    (last To)
                                )
                                Orthogonal 
                                (to if:
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (apply 
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                            
                            (if 
                                (is Line 3 Orthogonal exact:True)
                                
                                (moveAgain)
                            )
                            }
                        )
                    )
                )
            )
            }
        )
        
        (rules 
            (start 
                (place "Marker" "Hand" count:12)
            )
            phases:{ 
            (phase "Placement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (move 
                            (from 
                                (handSite Mover)
                            )
                            
                            (to 
                                (sites Empty)
                            )
                            
                            (then 
                                (and { 
                                    (custodial 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (between 
                                            (max 1)
                                            if:
                                            (is Enemy 
                                                (who at:
                                                    (between)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (between)
                                                )
                                            )
                                        )
                                        
                                        (to if:
                                            (is Friend 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (intervene 
                                        (from 
                                            (last To)
                                        )
                                        Orthogonal 
                                        (to if:
                                            (is Enemy 
                                                (who at:
                                                    (to)
                                                )
                                            )
                                            
                                            (apply 
                                                (remove 
                                                    (to)
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (is Line 3 Orthogonal exact:True)
                                        
                                        (moveAgain)
                                    )
                                    }
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (all Sites 
                        (sites Hand Mover)
                        if:
                        (= 0 
                            (count Cell at:
                                (site)
                            )
                        )
                    )
                "Movement")
            )
            
            (phase "Movement" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Remove 
                            (sites Occupied by:Next container:"Board")
                        )
                        
                        (forEach Piece)
                    )
                )
            )
            }
            
            (end 
                (if 
                    (= 
                        (score Mover)
                    5)
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Macheng (Ludii 10) ruleset.")
    
    (item "Incomplete"
        <
        (players 2)
        
        (equipment { 
            (board (concentric Square rings:[#]) use:Vertex) 
            (hand Each)
            (piece "Marker" Each 
                (move
                    Step 
                    (to if:(is Empty (to))) 
                    (then
                        (and {
                            "Custodial"
                            "Intervene"
                            "IfLine3MoveAgain" 
                        })
                    )
                )
            ) 
        }) 
        (rules 
            (start (place "Marker" "Hand" count:[#]))
            
            phases:{
            (phase "Placement"
                (play
                    (if "SameTurn"
                        "RemoveEnemyPiece"
                        (move 
                            (from (handSite Mover)) 
                            (to (sites Empty)) 
                            (then
                                (and {
                                    "Custodial"
                                    "Intervene"
                                    "IfLine3MoveAgain" 
                                })
                            )
                        ) 
                    )
                ) 
                (nextPhase Mover ("HandEmpty" Mover) "Movement")
            )
            
            (phase "Movement" 
                (play 
                    (if "SameTurn"
                        "RemoveEnemyPiece"
                        (forEach Piece)
                    )
                )
            )
            }
            
            (end [#])
        )
        >
        "The incomplete ruleset."
    )
    
})

//------------------------------------------------------------------------------

(rulesets {
    
    (ruleset "Ruleset/Macheng (Ludii 1) (Reconstructed)" {
        "Variant/Macheng (Ludii 1)"
    })
    (ruleset "Ruleset/Macheng (Ludii 2) (Reconstructed)" {
        "Variant/Macheng (Ludii 2)"
    })
    (ruleset "Ruleset/Macheng (Ludii 3) (Reconstructed)" {
        "Variant/Macheng (Ludii 3)"
    })
    (ruleset "Ruleset/Macheng (Ludii 4) (Reconstructed)" {
        "Variant/Macheng (Ludii 4)"
    })
    (ruleset "Ruleset/Macheng (Ludii 5) (Reconstructed)" {
        "Variant/Macheng (Ludii 5)"
    })
    (ruleset "Ruleset/Macheng (Ludii 6) (Reconstructed)" {
        "Variant/Macheng (Ludii 6)"
    })
    (ruleset "Ruleset/Macheng (Ludii 7) (Reconstructed)" {
        "Variant/Macheng (Ludii 7)"
    })
    (ruleset "Ruleset/Macheng (Ludii 8) (Reconstructed)" {
        "Variant/Macheng (Ludii 8)"
    })
    (ruleset "Ruleset/Macheng (Ludii 9) (Reconstructed)" {
        "Variant/Macheng (Ludii 9)"
    })
    (ruleset "Ruleset/Macheng (Ludii 10) (Reconstructed)" {
        "Variant/Macheng (Ludii 10)"
    })
    
    (ruleset "Ruleset/Historical Information (Incomplete)" {
        "Variant/Incomplete"
    })
    
})

//------------------------------------------------------------------------------

(metadata 
    
    (info
        {
        (description "Macheng is a capturing game played in Ming Dynasty China. It was described as a game commonly played in alleys.")
        (useFor "Ruleset/Historical Information (Incomplete)" (rules "Played on a merels board. Players place their pieces on the board. When three pieces are in a straight line, one of the opponent's pieces is removed from the board. When a player surrounds an opponent's piece with two of their pieces, the opponent's piece is  removed. When a player places their piece between two of the opponent's pieces, the opponent's pieces are removed."))
        (useFor "Ruleset/Historical Information (Incomplete)" (source "DLP evidence."))
        (useFor "Ruleset/Historical Information (Incomplete)" (id "1239"))
        (useFor "Ruleset/Macheng (Ludii 1) (Reconstructed)" (rules "The game Macheng is played by two players on a square board with concentric tiling. 
                All players play with Markers.
                Rules for Pieces:
                Markers step adjacent then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again.
                Players take turns moving.
                Rules: 
                If in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else from vertex in Player the moving player's hand site 0 to vertex in the set of empty vertexs moveRule: true then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again if in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else move one of your pieces.
                Aim: 
                If the next player cannot move, the moving player wins.
                
        "))
        (useFor "Ruleset/Macheng (Ludii 1) (Reconstructed)" (id "2918"))
        (useFor "Ruleset/Macheng (Ludii 2) (Reconstructed)" (rules "The game Macheng is played by two players on a square board with concentric tiling. 
                All players play with Markers.
                Rules for Pieces:
                Markers step adjacent then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again.
                Players take turns moving.
                Rules: 
                If in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else from vertex in Player the moving player's hand site 0 to vertex in the set of empty vertexs moveRule: true then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again if in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else move one of your pieces.
                Aim: 
                If the next player cannot move or the number of pieces owned by Player the next player is less than or equal to 2, the moving player wins.
                
        "))
        (useFor "Ruleset/Macheng (Ludii 2) (Reconstructed)" (id "2919"))
        (useFor "Ruleset/Macheng (Ludii 3) (Reconstructed)" (rules "The game Macheng is played by two players on a square board with concentric tiling. 
                All players play with Markers.
                Rules for Pieces:
                Markers step adjacent then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again.
                Players take turns moving.
                Rules: 
                If in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else from vertex in Player the moving player's hand site 0 to vertex in the set of empty vertexs moveRule: true then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again if in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else move one of your pieces.
                Aim: 
                If the next player cannot move, the moving player wins.
                
        "))
        (useFor "Ruleset/Macheng (Ludii 3) (Reconstructed)" (id "2920"))
        (useFor "Ruleset/Macheng (Ludii 4) (Reconstructed)" (rules "The game Macheng is played by two players on a square board with concentric tiling. 
                All players play with Markers.
                Rules for Pieces:
                Markers step adjacent then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again.
                Players take turns moving.
                Rules: 
                If in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else from vertex in Player the moving player's hand site 0 to vertex in the set of empty vertexs moveRule: true then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again if in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else move one of your pieces.
                Aim: 
                If player two cannot move, player one wins If the number of pieces owned by Player 1 is less than 2, player two wins.
                
        "))
        (useFor "Ruleset/Macheng (Ludii 4) (Reconstructed)" (id "2921"))
        (useFor "Ruleset/Macheng (Ludii 5) (Reconstructed)" (rules "The game Macheng is played by two players on a square board with concentric tiling. 
                All players play with Markers.
                Rules for Pieces:
                Markers step adjacent then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again.
                Players take turns moving.
                Rules: 
                If in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else from vertex in Player the moving player's hand site 0 to vertex in the set of empty vertexs moveRule: true then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again if in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else move one of your pieces.
                Aim: 
                If the next player cannot move or the number of pieces owned by Player the next player is less than or equal to 2, the moving player wins.
                
        "))
        (useFor "Ruleset/Macheng (Ludii 5) (Reconstructed)" (id "2922"))
        (useFor "Ruleset/Macheng (Ludii 6) (Reconstructed)" (rules "The game Macheng is played by two players on a square board with concentric tiling. 
                All players play with Markers.
                Rules for Pieces:
                Markers step adjacent then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again.
                Players take turns moving.
                Rules: 
                If in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else from vertex in Player the moving player's hand site 0 to vertex in the set of empty vertexs moveRule: true then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again if in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else move one of your pieces.
                Aim: 
                If player one cannot move, player two wins If the number of pieces owned by Player 2 is less than 2, player one wins.
                
        "))
        (useFor "Ruleset/Macheng (Ludii 6) (Reconstructed)" (id "2923"))
        (useFor "Ruleset/Macheng (Ludii 7) (Reconstructed)" (rules "The game Macheng is played by two players on a square board with concentric tiling. 
                All players play with Markers.
                Rules for Pieces:
                Markers step adjacent then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again.
                Players take turns moving.
                Rules: 
                If in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else from vertex in Player the moving player's hand site 0 to vertex in the set of empty vertexs moveRule: true then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again if in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else move one of your pieces.
                Aim: 
                If player two cannot move, player one wins If the number of pieces owned by Player 1 is less than 2, player two wins.
                
        "))
        (useFor "Ruleset/Macheng (Ludii 7) (Reconstructed)" (id "2924"))
        (useFor "Ruleset/Macheng (Ludii 8) (Reconstructed)" (rules "The game Macheng is played by two players on a square board with concentric tiling. 
                All players play with Markers.
                Rules for Pieces:
                Markers step adjacent then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again.
                Players take turns moving.
                Rules: 
                If in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else from vertex in Player the moving player's hand site 0 to vertex in the set of empty vertexs moveRule: true then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again if in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else move one of your pieces.
                Aim: 
                If player two cannot move, player one wins If the number of pieces owned by Player 1 is less than 2, player two wins.
                
        "))
        (useFor "Ruleset/Macheng (Ludii 8) (Reconstructed)" (id "2925"))
        (useFor "Ruleset/Macheng (Ludii 9) (Reconstructed)" (rules "The game Macheng is played by two players on a square board with concentric tiling. 
                All players play with Markers.
                Rules for Pieces:
                Markers step adjacent then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again.
                Players take turns moving.
                Rules: 
                If in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else from vertex in Player the moving player's hand site 0 to vertex in the set of empty vertexs moveRule: true then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again if in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else move one of your pieces.
                Aim: 
                If player one cannot move, player two wins If the number of pieces owned by Player 2 is less than 2, player one wins.
                
        "))
        (useFor "Ruleset/Macheng (Ludii 9) (Reconstructed)" (id "2926"))
        (useFor "Ruleset/Macheng (Ludii 10) (Reconstructed)" (rules "The game Macheng is played by two players on a square board with concentric tiling. 
                All players play with Markers.
                Rules for Pieces:
                Markers step adjacent then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again.
                Players take turns moving.
                Rules: 
                If in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else from vertex in Player the moving player's hand site 0 to vertex in the set of empty vertexs moveRule: true then for all flanked pieces on Vertexes starting from the to location of the last move with Orthogonal direction with a limit of 1 pieces if the target is there is an enemy Player at between if the friend is is a friendremove pieces at between and apply remove pieces at to to all sites flanking Vertexes the to location of the last move in dirrection Orthogonal and if a player places 3 of their pieces in an orthogonal direction line, move again if in the same turn, remove pieces at sites occupied by any component owned by Next in Board, else move one of your pieces.
                Aim: 
                If the score of Player the moving player is equal to 5, the moving player wins.
                
        "))
        (useFor "Ruleset/Macheng (Ludii 10) (Reconstructed)" (id "2927"))
        (source "Wu and Sebillaud 2020: 49.")
        (version "1.3.12")
        (classification "board/war/reconstruction/done")
        (credit "Eric Piette")
        (origin "This game was played in China, from around 1567 to 1624.")
        }
    )
    
)

