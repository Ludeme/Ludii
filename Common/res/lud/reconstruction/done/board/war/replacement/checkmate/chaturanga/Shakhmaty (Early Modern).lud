(define "CaptureToPiece"
    (apply 
        (if ("IsEnemyAt" (to))
            (remove 
                (to) 
            )
        )
    ) 
)

//------------------------------------------------------------------------------

(game "Shakhmaty (Early Modern)"
    <Variant>
)

//------------------------------------------------------------------------------

(option "Variant" <Variant> args:{ <variant> }
    {
    (item "Shakhmaty (Early Modern) (Ludii 1)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or 
                        (move Step Orthogonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step Diagonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or { 
                        (if 
                            (is In 
                                (from)
                                
                                (sites Start 
                                    (piece 
                                        (what at:
                                            (from)
                                        )
                                    )
                                )
                            )
                            
                            (move Slide Forward 
                                (between 
                                    (exact 2)
                                    if:
                                    (is Empty 
                                        (between)
                                    )
                                )
                                
                                (to if:
                                    (is Empty 
                                        (to)
                                    )
                                )
                            )
                        )
                        
                        (move Step Forward 
                            (to if:
                                (and 
                                    (is Empty 
                                        (to)
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step 
                            (directions { FR FL }
                            )
                            
                            (to if:
                                (and 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                        }
                        
                        (then 
                            (if 
                                (is In 
                                    (last To)
                                    
                                    (sites Mover "Promotion")
                                )
                                
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Orthogonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 1) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 2)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or 
                        (move Step Orthogonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step Diagonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or { 
                        (if 
                            (is In 
                                (from)
                                
                                (sites Start 
                                    (piece 
                                        (what at:
                                            (from)
                                        )
                                    )
                                )
                            )
                            
                            (move Slide Forward 
                                (between 
                                    (exact 2)
                                    if:
                                    (is Empty 
                                        (between)
                                    )
                                )
                                
                                (to if:
                                    (is Empty 
                                        (to)
                                    )
                                )
                            )
                        )
                        
                        (move Step Forward 
                            (to if:
                                (and 
                                    (is Empty 
                                        (to)
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step 
                            (directions { FR FL }
                            )
                            
                            (to if:
                                (and 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                        }
                        
                        (then 
                            (if 
                                (is In 
                                    (last To)
                                    
                                    (sites Mover "Promotion")
                                )
                                
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 2) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 3)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or 
                        (move Step Orthogonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step Diagonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or { 
                        (if 
                            (is In 
                                (from)
                                
                                (sites Start 
                                    (piece 
                                        (what at:
                                            (from)
                                        )
                                    )
                                )
                            )
                            
                            (move Slide Forward 
                                (between 
                                    (exact 2)
                                    if:
                                    (is Empty 
                                        (between)
                                    )
                                )
                                
                                (to if:
                                    (is Empty 
                                        (to)
                                    )
                                )
                            )
                        )
                        
                        (move Step Forward 
                            (to if:
                                (and 
                                    (is Empty 
                                        (to)
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step 
                            (directions { FR FL }
                            )
                            
                            (to if:
                                (and 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                        }
                        
                        (then 
                            (if 
                                (is In 
                                    (last To)
                                    
                                    (sites Mover "Promotion")
                                )
                                
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 3) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 4)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or 
                        (move Step Orthogonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step Diagonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or { 
                        (if 
                            (is In 
                                (from)
                                
                                (sites Start 
                                    (piece 
                                        (what at:
                                            (from)
                                        )
                                    )
                                )
                            )
                            
                            (move Slide Forward 
                                (between 
                                    (exact 2)
                                    if:
                                    (is Empty 
                                        (between)
                                    )
                                )
                                
                                (to if:
                                    (is Empty 
                                        (to)
                                    )
                                )
                            )
                        )
                        
                        (move Step Forward 
                            (to if:
                                (and 
                                    (is Empty 
                                        (to)
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step 
                            (directions { FR FL }
                            )
                            
                            (to if:
                                (and 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                        }
                        
                        (then 
                            (if 
                                (is In 
                                    (last To)
                                    
                                    (sites Mover "Promotion")
                                )
                                
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Orthogonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 4) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 5)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or 
                        (move Step Orthogonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step Diagonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or { 
                        (if 
                            (is In 
                                (from)
                                
                                (sites Start 
                                    (piece 
                                        (what at:
                                            (from)
                                        )
                                    )
                                )
                            )
                            
                            (move Slide Forward 
                                (between 
                                    (exact 2)
                                    if:
                                    (is Empty 
                                        (between)
                                    )
                                )
                                
                                (to if:
                                    (is Empty 
                                        (to)
                                    )
                                )
                            )
                        )
                        
                        (move Step Forward 
                            (to if:
                                (and 
                                    (is Empty 
                                        (to)
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step 
                            (directions { FR FL }
                            )
                            
                            (to if:
                                (and 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                        }
                        
                        (then 
                            (if 
                                (is In 
                                    (last To)
                                    
                                    (sites Mover "Promotion")
                                )
                                
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Orthogonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Home" P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 5) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 6)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move 
                        (from 
                            (from)
                        )
                        
                        (to 
                            (union 
                                (intersection 
                                    (sites Around 
                                        (forEach 
                                            (sites Around 
                                                (from)
                                            Diagonal)
                                            if:
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                        Orthogonal if:
                                        (and 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (to)
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                            
                                            (not 
                                                (is Friend 
                                                    (who at:
                                                        (to)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (sites Distance Orthogonal from:
                                        (from)
                                        
                                        (exact 3)
                                    )
                                )
                                
                                (intersection 
                                    (sites Around 
                                        (forEach 
                                            (sites Around 
                                                (from)
                                            Orthogonal)
                                            if:
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                        Diagonal if:
                                        (and 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (to)
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                            
                                            (not 
                                                (is Friend 
                                                    (who at:
                                                        (to)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (sites Distance Orthogonal from:
                                        (from)
                                        
                                        (exact 3)
                                    )
                                )
                            )
                            
                            (apply if:
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or { 
                        (if 
                            (is In 
                                (from)
                                
                                (sites Start 
                                    (piece 
                                        (what at:
                                            (from)
                                        )
                                    )
                                )
                            )
                            
                            (move Slide Forward 
                                (between 
                                    (exact 2)
                                    if:
                                    (is Empty 
                                        (between)
                                    )
                                )
                                
                                (to if:
                                    (is Empty 
                                        (to)
                                    )
                                )
                            )
                        )
                        
                        (move Step Forward 
                            (to if:
                                (and 
                                    (is Empty 
                                        (to)
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step 
                            (directions { FR FL }
                            )
                            
                            (to if:
                                (and 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                        }
                        
                        (then 
                            (if 
                                (is In 
                                    (last To)
                                    
                                    (sites Mover "Promotion")
                                )
                                
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Orthogonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 6) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 7)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                            
                            (then 
                                (set Pending 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (and 
                                (is Pending)
                                
                                (= 
                                    (to)
                                    
                                    (value Pending)
                                )
                            )
                        )
                        
                        (then 
                            (remove 
                                (ahead 
                                    (last To)
                                Backward)
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 7) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 8)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    }
                )
            )
            
            (piece "Rook" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Orthogonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 8) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 9)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                            
                            (then 
                                (set Pending 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (and 
                                (is Pending)
                                
                                (= 
                                    (to)
                                    
                                    (value Pending)
                                )
                            )
                        )
                        
                        (then 
                            (remove 
                                (ahead 
                                    (last To)
                                Backward)
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Orthogonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 9) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 10)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or 
                        (move Step Orthogonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step Diagonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move 
                        (from 
                            (from)
                        )
                        
                        (to 
                            (union 
                                (intersection 
                                    (sites Around 
                                        (forEach 
                                            (sites Around 
                                                (from)
                                            Diagonal)
                                            if:
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                        Orthogonal if:
                                        (and 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (to)
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                            
                                            (not 
                                                (is Friend 
                                                    (who at:
                                                        (to)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (sites Distance Orthogonal from:
                                        (from)
                                        
                                        (exact 3)
                                    )
                                )
                                
                                (intersection 
                                    (sites Around 
                                        (forEach 
                                            (sites Around 
                                                (from)
                                            Orthogonal)
                                            if:
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                        Diagonal if:
                                        (and 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (to)
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                            
                                            (not 
                                                (is Friend 
                                                    (who at:
                                                        (to)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (sites Distance Orthogonal from:
                                        (from)
                                        
                                        (exact 3)
                                    )
                                )
                            )
                            
                            (apply if:
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                            
                            (then 
                                (set Pending 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (and 
                                (is Pending)
                                
                                (= 
                                    (to)
                                    
                                    (value Pending)
                                )
                            )
                        )
                        
                        (then 
                            (remove 
                                (ahead 
                                    (last To)
                                Backward)
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 10) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 11)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move 
                        (from 
                            (from)
                        )
                        
                        (to 
                            (union 
                                (intersection 
                                    (sites Around 
                                        (forEach 
                                            (sites Around 
                                                (from)
                                            Diagonal)
                                            if:
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                        Orthogonal if:
                                        (and 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (to)
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                            
                                            (not 
                                                (is Friend 
                                                    (who at:
                                                        (to)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (sites Distance Orthogonal from:
                                        (from)
                                        
                                        (exact 3)
                                    )
                                )
                                
                                (intersection 
                                    (sites Around 
                                        (forEach 
                                            (sites Around 
                                                (from)
                                            Orthogonal)
                                            if:
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                        Diagonal if:
                                        (and 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (to)
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                            
                                            (not 
                                                (is Friend 
                                                    (who at:
                                                        (to)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (sites Distance Orthogonal from:
                                        (from)
                                        
                                        (exact 3)
                                    )
                                )
                            )
                            
                            (apply if:
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                            
                            (then 
                                (set Pending 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (and 
                                (is Pending)
                                
                                (= 
                                    (to)
                                    
                                    (value Pending)
                                )
                            )
                        )
                        
                        (then 
                            (remove 
                                (ahead 
                                    (last To)
                                Backward)
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Orthogonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions "Home" P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 11) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 12)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move 
                        (from 
                            (from)
                        )
                        
                        (to 
                            (union 
                                (intersection 
                                    (sites Around 
                                        (forEach 
                                            (sites Around 
                                                (from)
                                            Diagonal)
                                            if:
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                        Orthogonal if:
                                        (and 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (to)
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                            
                                            (not 
                                                (is Friend 
                                                    (who at:
                                                        (to)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (sites Distance Orthogonal from:
                                        (from)
                                        
                                        (exact 3)
                                    )
                                )
                                
                                (intersection 
                                    (sites Around 
                                        (forEach 
                                            (sites Around 
                                                (from)
                                            Orthogonal)
                                            if:
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                        Diagonal if:
                                        (and 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (to)
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                            
                                            (not 
                                                (is Friend 
                                                    (who at:
                                                        (to)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (sites Distance Orthogonal from:
                                        (from)
                                        
                                        (exact 3)
                                    )
                                )
                            )
                            
                            (apply if:
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    }
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 12) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 13)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    }
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 13) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 14)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or { 
                        (if 
                            (is In 
                                (from)
                                
                                (sites Start 
                                    (piece 
                                        (what at:
                                            (from)
                                        )
                                    )
                                )
                            )
                            
                            (move Slide Forward 
                                (between 
                                    (exact 2)
                                    if:
                                    (is Empty 
                                        (between)
                                    )
                                )
                                
                                (to if:
                                    (is Empty 
                                        (to)
                                    )
                                )
                            )
                        )
                        
                        (move Step Forward 
                            (to if:
                                (and 
                                    (is Empty 
                                        (to)
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step 
                            (directions { FR FL }
                            )
                            
                            (to if:
                                (and 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                        }
                        
                        (then 
                            (if 
                                (is In 
                                    (last To)
                                    
                                    (sites Mover "Promotion")
                                )
                                
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 14) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 15)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or { 
                        (if 
                            (is In 
                                (from)
                                
                                (sites Start 
                                    (piece 
                                        (what at:
                                            (from)
                                        )
                                    )
                                )
                            )
                            
                            (move Slide Forward 
                                (between 
                                    (exact 2)
                                    if:
                                    (is Empty 
                                        (between)
                                    )
                                )
                                
                                (to if:
                                    (is Empty 
                                        (to)
                                    )
                                )
                            )
                        )
                        
                        (move Step Forward 
                            (to if:
                                (and 
                                    (is Empty 
                                        (to)
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step 
                            (directions { FR FL }
                            )
                            
                            (to if:
                                (and 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                        }
                        
                        (then 
                            (if 
                                (is In 
                                    (last To)
                                    
                                    (sites Mover "Promotion")
                                )
                                
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Orthogonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Home" P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 15) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 16)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or 
                        (move Step Orthogonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step Diagonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                            
                            (then 
                                (set Pending 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (and 
                                (is Pending)
                                
                                (= 
                                    (to)
                                    
                                    (value Pending)
                                )
                            )
                        )
                        
                        (then 
                            (remove 
                                (ahead 
                                    (last To)
                                Backward)
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 16) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 17)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                            
                            (then 
                                (set Pending 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (and 
                                (is Pending)
                                
                                (= 
                                    (to)
                                    
                                    (value Pending)
                                )
                            )
                        )
                        
                        (then 
                            (remove 
                                (ahead 
                                    (last To)
                                Backward)
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Home" P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 17) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 18)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move 
                        (from 
                            (from)
                        )
                        
                        (to 
                            (union 
                                (intersection 
                                    (sites Around 
                                        (forEach 
                                            (sites Around 
                                                (from)
                                            Diagonal)
                                            if:
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                        Orthogonal if:
                                        (and 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (to)
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                            
                                            (not 
                                                (is Friend 
                                                    (who at:
                                                        (to)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (sites Distance Orthogonal from:
                                        (from)
                                        
                                        (exact 3)
                                    )
                                )
                                
                                (intersection 
                                    (sites Around 
                                        (forEach 
                                            (sites Around 
                                                (from)
                                            Orthogonal)
                                            if:
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                        Diagonal if:
                                        (and 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (from)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (to)
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                            
                                            (not 
                                                (is Friend 
                                                    (who at:
                                                        (to)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (sites Distance Orthogonal from:
                                        (from)
                                        
                                        (exact 3)
                                    )
                                )
                            )
                            
                            (apply if:
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                            
                            (then 
                                (set Pending 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (and 
                                (is Pending)
                                
                                (= 
                                    (to)
                                    
                                    (value Pending)
                                )
                            )
                        )
                        
                        (then 
                            (remove 
                                (ahead 
                                    (last To)
                                Backward)
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 18) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 19)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (or 
                        (move Step Orthogonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Edge of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Edge of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (is Empty Edge 
                                            (site)
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                        
                        (move Step Diagonal 
                            (to if:
                                (and 
                                    (not 
                                        (is Friend 
                                            (who at:
                                                (to)
                                            )
                                        )
                                    )
                                    
                                    (all Sites 
                                        (intersection 
                                            (sites Incident Vertex of:Cell at:
                                                (from)
                                            )
                                            
                                            (sites Incident Vertex of:Cell at:
                                                (to)
                                            )
                                        )
                                        if:
                                        (all Sites 
                                            (sites Incident Edge of:Vertex at:
                                                (site)
                                            )
                                            if:
                                            (is Empty Edge 
                                                (site)
                                            )
                                        )
                                    )
                                )
                                
                                (apply 
                                    (if 
                                        (is Enemy 
                                            (who at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    }
                )
            )
            
            (piece "Rook" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Orthogonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Edge of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Edge of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (is Empty Edge 
                                                    (site)
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (if 
                    (is Active 
                        (who at:
                            (from)
                        )
                    )
                    
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply if:
                                (all Sites 
                                    (sites Between 
                                        (directions Cell from:
                                            (from)
                                            to:
                                            (to)
                                        )
                                        from:
                                        (from)
                                        fromIncluded:True to:
                                        (to)
                                    )
                                    if:
                                    (not 
                                        (not 
                                            (all Sites 
                                                (intersection 
                                                    (sites Incident Vertex of:Cell at:
                                                        (site)
                                                    )
                                                    
                                                    (sites Incident Vertex of:Cell at:
                                                        (ahead 
                                                            (site)
                                                            
                                                            (directions Cell from:
                                                                (from)
                                                                to:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                if:
                                                (all Sites 
                                                    (sites Incident Edge of:Vertex at:
                                                        (site)
                                                    )
                                                    if:
                                                    (is Empty Edge 
                                                        (site)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Home" P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 19) ruleset.")
    
    (item "Shakhmaty (Early Modern) (Ludii 20)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (or 
                    (move Slide 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    }
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (map { 
                (pair P1 FirstSite)
                
                (pair P2 LastSite)
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Home" P1 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Shakhmaty (Early Modern) (Ludii 20) ruleset.")
    
    (item "Incomplete"
        <
        ("TwoPlayersNorthSouth")
        (equipment { // Each player has one king, one queen, two bishops, two knights, two rooks, and eight pawns.
            (board (square 8))
            (piece "King" Each [#])
            (piece "Queen" Each 
                (or
                    (move
                        Slide 
                        (to 
                            if:("IsEnemyAt" (to)) 
                            "CaptureToPiece"
                        ) 
                    ) 
                    (move
                        Leap 
                        "KnightWalk" 
                        (to 
                            if:(not ("IsFriendAt" (to))) 
                            "CaptureToPiece"
                        ) 
                    )
                )
            )
            (piece "Knight" Each [#])
            (piece "Pawn" Each [#])
            (piece "Rook" Each [#])
            (piece "Bishop" Each [#])
            (map [#])
            (map [#])
            (map [#])
            (regions [#])
            (regions [#])
        })
        (rules [#])
        >
        "The incomplete ruleset."
    )
    
})

//------------------------------------------------------------------------------

(rulesets {
    
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 1) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 1)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 2) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 2)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 3) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 3)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 4) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 4)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 5) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 5)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 6) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 6)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 7) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 7)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 8) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 8)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 9) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 9)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 10) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 10)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 11) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 11)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 12) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 12)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 13) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 13)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 14) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 14)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 15) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 15)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 16) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 16)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 17) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 17)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 18) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 18)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 19) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 19)"
    })
    (ruleset "Ruleset/Shakhmaty (Early Modern) (Ludii 20) (Reconstructed)" {
        "Variant/Shakhmaty (Early Modern) (Ludii 20)"
    }) 
    
    (ruleset "Ruleset/Historical Information (Incomplete)" {
        "Variant/Incomplete"
    })
    
})

//------------------------------------------------------------------------------

(metadata 
    
    (info
        {
        (description "This version of Shakhmaty appears during the early modern period as a method for speeding up the game. ")
        (aliases {"Shakhmaty"})
        (useFor "Ruleset/Historical Information (Incomplete)" (rules "8x8 board. Each player has one king, one queen, two bishops, two knights, two rooks, and eight pawns. The Queen moves any distance orthogonally or diagonally, or one space orthogonally and then another space diagonally, jumping over any intervening pieces."))
        (useFor "Ruleset/Historical Information (Incomplete)" (source "DLP evidence."))
        (useFor "Ruleset/Historical Information (Incomplete)" (id "1429"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 1) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP1: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops if Player Player at the location of the piece is active, slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if Player Player at the location of the piece is active, if there is an enemy Player at to, remove pieces at to then step orthogonal or if there is an enemy Player at to, remove pieces at to then step diagonal.
                Knights leap a piece to not is a friend.
                Pawns if Player Player at the location of the piece is active, if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks if Player Player at the location of the piece is active, slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 1) (Reconstructed)" (id "3842"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 2) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                Promotion: the top sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if Player Player at the location of the piece is active, if there is an enemy Player at to, remove pieces at to then step orthogonal or if there is an enemy Player at to, remove pieces at to then step diagonal.
                Knights leap a piece to not is a friend.
                Pawns if Player Player at the location of the piece is active, if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 2) (Reconstructed)" (id "3843"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 3) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP1: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if Player Player at the location of the piece is active, if there is an enemy Player at to, remove pieces at to then step orthogonal or if there is an enemy Player at to, remove pieces at to then step diagonal.
                Knights leap a piece to not is a friend.
                Pawns if Player Player at the location of the piece is active, if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 3) (Reconstructed)" (id "3844"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 4) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                Promotion: the top sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if Player Player at the location of the piece is active, if there is an enemy Player at to, remove pieces at to then step orthogonal or if there is an enemy Player at to, remove pieces at to then step diagonal.
                Knights leap a piece to not is a friend.
                Pawns if Player Player at the location of the piece is active, if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks if Player Player at the location of the piece is active, slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 4) (Reconstructed)" (id "3845"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 5) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Home: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops if Player Player at the location of the piece is active, slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if Player Player at the location of the piece is active, if there is an enemy Player at to, remove pieces at to then step orthogonal or if there is an enemy Player at to, remove pieces at to then step diagonal.
                Knights leap a piece to not is a friend.
                Pawns if Player Player at the location of the piece is active, if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks if Player Player at the location of the piece is active, slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 5) (Reconstructed)" (id "3846"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 6) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the top sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights if Player Player at the location of the piece is active, from cell in the location of the piece to cell in the union of the intersection of the number of sites within 1 spaces of all sites in the intersection of all Vertexes that are incident of Cell the location of the piece and all Vertexes that are incident of Cell current site satisfy the condition all sites in all Edges that are incident of Vertex current site satisfy the condition empty the number of sites within 1 spaces of the location of the piece includeOrigin: false if all sites in the intersection of all Edges that are incident of Cell the location of the piece and all Edges that are incident of Cell to satisfy the condition empty and not is a friend includeOrigin: false and the sites which are within the range [3,3] spaces from site the location of the piece for the Orthogonal relations and the intersection of the number of sites within 1 spaces of all sites in the intersection of all Edges that are incident of Cell the location of the piece and all Edges that are incident of Cell current site satisfy the condition empty the number of sites within 1 spaces of the location of the piece includeOrigin: false if all sites in the intersection of all Vertexes that are incident of Cell the location of the piece and all Vertexes that are incident of Cell to satisfy the condition all sites in all Edges that are incident of Vertex current site satisfy the condition empty and not is a friend includeOrigin: false and the sites which are within the range [3,3] spaces from site the location of the piece for the Orthogonal relations moveRule: true captureRule: there is an enemy Player at to captureEffect: remove pieces at to.
                Pawns if Player Player at the location of the piece is active, if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in Promotion or Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks if Player Player at the location of the piece is active, slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 6) (Reconstructed)" (id "3847"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 7) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                RegionP1: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops if Player Player at the location of the piece is active, slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward or remove pieces at to then step forward-right or forward-left or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 7) (Reconstructed)" (id "3848"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 8) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                RegionP1: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops if Player Player at the location of the piece is active, slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks if Player Player at the location of the piece is active, slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 8) (Reconstructed)" (id "3849"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 9) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                RegionP1: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops if Player Player at the location of the piece is active, slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward or remove pieces at to then step forward-right or forward-left or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks if Player Player at the location of the piece is active, slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 9) (Reconstructed)" (id "3850"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 10) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the top sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if Player Player at the location of the piece is active, if there is an enemy Player at to, remove pieces at to then step orthogonal or if there is an enemy Player at to, remove pieces at to then step diagonal.
                Knights if Player Player at the location of the piece is active, from cell in the location of the piece to cell in the union of the intersection of the number of sites within 1 spaces of all sites in the intersection of all Vertexes that are incident of Cell the location of the piece and all Vertexes that are incident of Cell current site satisfy the condition all sites in all Edges that are incident of Vertex current site satisfy the condition empty the number of sites within 1 spaces of the location of the piece includeOrigin: false if all sites in the intersection of all Edges that are incident of Cell the location of the piece and all Edges that are incident of Cell to satisfy the condition empty and not is a friend includeOrigin: false and the sites which are within the range [3,3] spaces from site the location of the piece for the Orthogonal relations and the intersection of the number of sites within 1 spaces of all sites in the intersection of all Edges that are incident of Cell the location of the piece and all Edges that are incident of Cell current site satisfy the condition empty the number of sites within 1 spaces of the location of the piece includeOrigin: false if all sites in the intersection of all Vertexes that are incident of Cell the location of the piece and all Vertexes that are incident of Cell to satisfy the condition all sites in all Edges that are incident of Vertex current site satisfy the condition empty and not is a friend includeOrigin: false and the sites which are within the range [3,3] spaces from site the location of the piece for the Orthogonal relations moveRule: true captureRule: there is an enemy Player at to captureEffect: remove pieces at to.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward or remove pieces at to then step forward-right or forward-left or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion or Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 10) (Reconstructed)" (id "3851"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 11) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                Home: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights if Player Player at the location of the piece is active, from cell in the location of the piece to cell in the union of the intersection of the number of sites within 1 spaces of all sites in the intersection of all Vertexes that are incident of Cell the location of the piece and all Vertexes that are incident of Cell current site satisfy the condition all sites in all Edges that are incident of Vertex current site satisfy the condition empty the number of sites within 1 spaces of the location of the piece includeOrigin: false if all sites in the intersection of all Edges that are incident of Cell the location of the piece and all Edges that are incident of Cell to satisfy the condition empty and not is a friend includeOrigin: false and the sites which are within the range [3,3] spaces from site the location of the piece for the Orthogonal relations and the intersection of the number of sites within 1 spaces of all sites in the intersection of all Edges that are incident of Cell the location of the piece and all Edges that are incident of Cell current site satisfy the condition empty the number of sites within 1 spaces of the location of the piece includeOrigin: false if all sites in the intersection of all Vertexes that are incident of Cell the location of the piece and all Vertexes that are incident of Cell to satisfy the condition all sites in all Edges that are incident of Vertex current site satisfy the condition empty and not is a friend includeOrigin: false and the sites which are within the range [3,3] spaces from site the location of the piece for the Orthogonal relations moveRule: true captureRule: there is an enemy Player at to captureEffect: remove pieces at to.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward or remove pieces at to then step forward-right or forward-left or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in , move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks if Player Player at the location of the piece is active, slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 11) (Reconstructed)" (id "3852"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 12) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP1: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops if Player Player at the location of the piece is active, slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights if Player Player at the location of the piece is active, from cell in the location of the piece to cell in the union of the intersection of the number of sites within 1 spaces of all sites in the intersection of all Vertexes that are incident of Cell the location of the piece and all Vertexes that are incident of Cell current site satisfy the condition all sites in all Edges that are incident of Vertex current site satisfy the condition empty the number of sites within 1 spaces of the location of the piece includeOrigin: false if all sites in the intersection of all Edges that are incident of Cell the location of the piece and all Edges that are incident of Cell to satisfy the condition empty and not is a friend includeOrigin: false and the sites which are within the range [3,3] spaces from site the location of the piece for the Orthogonal relations and the intersection of the number of sites within 1 spaces of all sites in the intersection of all Edges that are incident of Cell the location of the piece and all Edges that are incident of Cell current site satisfy the condition empty the number of sites within 1 spaces of the location of the piece includeOrigin: false if all sites in the intersection of all Vertexes that are incident of Cell the location of the piece and all Vertexes that are incident of Cell to satisfy the condition all sites in all Edges that are incident of Vertex current site satisfy the condition empty and not is a friend includeOrigin: false and the sites which are within the range [3,3] spaces from site the location of the piece for the Orthogonal relations moveRule: true captureRule: there is an enemy Player at to captureEffect: remove pieces at to.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 12) (Reconstructed)" (id "3853"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 13) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the top sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops if Player Player at the location of the piece is active, slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 13) (Reconstructed)" (id "3854"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 14) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the top sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns if Player Player at the location of the piece is active, if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in Promotion or Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 14) (Reconstructed)" (id "3855"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 15) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Home: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops if Player Player at the location of the piece is active, slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns if Player Player at the location of the piece is active, if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks if Player Player at the location of the piece is active, slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 15) (Reconstructed)" (id "3856"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 16) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                RegionP1: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if Player Player at the location of the piece is active, if there is an enemy Player at to, remove pieces at to then step orthogonal or if there is an enemy Player at to, remove pieces at to then step diagonal.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward or remove pieces at to then step forward-right or forward-left or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 16) (Reconstructed)" (id "3857"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 17) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Home: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward or remove pieces at to then step forward-right or forward-left or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 17) (Reconstructed)" (id "3858"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 18) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the top sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights if Player Player at the location of the piece is active, from cell in the location of the piece to cell in the union of the intersection of the number of sites within 1 spaces of all sites in the intersection of all Vertexes that are incident of Cell the location of the piece and all Vertexes that are incident of Cell current site satisfy the condition all sites in all Edges that are incident of Vertex current site satisfy the condition empty the number of sites within 1 spaces of the location of the piece includeOrigin: false if all sites in the intersection of all Edges that are incident of Cell the location of the piece and all Edges that are incident of Cell to satisfy the condition empty and not is a friend includeOrigin: false and the sites which are within the range [3,3] spaces from site the location of the piece for the Orthogonal relations and the intersection of the number of sites within 1 spaces of all sites in the intersection of all Edges that are incident of Cell the location of the piece and all Edges that are incident of Cell current site satisfy the condition empty the number of sites within 1 spaces of the location of the piece includeOrigin: false if all sites in the intersection of all Vertexes that are incident of Cell the location of the piece and all Vertexes that are incident of Cell to satisfy the condition all sites in all Edges that are incident of Vertex current site satisfy the condition empty and not is a friend includeOrigin: false and the sites which are within the range [3,3] spaces from site the location of the piece for the Orthogonal relations moveRule: true captureRule: there is an enemy Player at to captureEffect: remove pieces at to.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward or remove pieces at to then step forward-right or forward-left or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion or Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 18) (Reconstructed)" (id "3859"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 19) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Home: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops if Player Player at the location of the piece is active, slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if Player Player at the location of the piece is active, if there is an enemy Player at to, remove pieces at to then step orthogonal or if there is an enemy Player at to, remove pieces at to then step diagonal.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks if Player Player at the location of the piece is active, slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 19) (Reconstructed)" (id "3860"))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 20) (Reconstructed)" (rules "The game Shakhmaty (Early Modern) is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Home: the bottom sites of the board for P1 
                All players play with Kings, Queens, Knights, Pawns, Rooks and Bishops.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells or leap a piece to not is a friend.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Shakhmaty (Early Modern) (Ludii 20) (Reconstructed)" (id "3861"))
        (source "Linder 1979: 149-150.")
        (version "1.3.11")
        (classification "board/war/replacement/checkmate/chaturanga/reconstruction/done")
        (credit "Eric Piette")
        (origin "This game was played in Russia., from around 1500 to 1799.")
        }
    )
    
    (graphics {
        (show Check "King")
        (piece Scale "Pawn" 0.825)
        (piece Families {"Defined" "Microsoft" "Pragmata" "Symbola"})
        (board Style Chess)
    })
    
    (recon {
        (concept "NumStartComponents" 32)
    })
    
)

