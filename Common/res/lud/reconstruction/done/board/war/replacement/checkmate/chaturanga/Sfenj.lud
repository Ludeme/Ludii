(game "Sfenj"
    <Variant>
)

//------------------------------------------------------------------------------

(option "Variant" <Variant> args:{ <variant> }
    {
    (item "Sfenj (Ludii 1)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (hand Each size:5)
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                            )
                        )
                    )
                )
            )
            
            (piece "Camel" Each 
                (move Hop Diagonal 
                    (between if:True)
                    
                    (to if:
                        (or 
                            (is Empty 
                                (to)
                            )
                            
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (promote 
                                (last To)
                                
                                (piece "Dog")
                            Mover)
                        )
                    )
                )
            )
            
            (piece "Dog" Each 
                (move Step Diagonal 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                            )
                        )
                    )
                )
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P2 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Camel1" { "C1" "F1"}
                )
                
                (place "Dog1" coord:"D1")
                
                (place "KingnoCross1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Camel2" { "C8" "F8"}
                )
                
                (place "Dog2" coord:"D8")
                
                (place "KingnoCross2" coord:"E8")
                }
            )
            
            (play 
                (do 
                    (forEach Piece)
                    ifAfterwards:
                    (not 
                        (is Threatened 
                            (id "KingnoCross" Mover)
                        )
                    )
                )
            )
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    { 
                    (if 
                        (no Pieces Next "Pawn")
                        
                        (result Mover Win)
                    )
                    
                    (if 
                        (!= 
                            (count Pieces Next "Pawn")
                        0)
                        
                        (result Mover Draw)
                    )
                    }
                )
            )
        )
        
    > "The Sfenj (Ludii 1) ruleset.")
    
    (item "Sfenj (Ludii 2)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                            
                            (then 
                                (set Pending 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (and 
                                (is Pending)
                                
                                (= 
                                    (to)
                                    
                                    (value Pending)
                                )
                            )
                        )
                        
                        (then 
                            (remove 
                                (ahead 
                                    (last To)
                                Backward)
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (move Slide 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "RookLeft" { 
                (pair 1 "A1")
                
                (pair 2 "A8")
                }
            )
            
            (map "RookRight" { 
                (pair 1 "H1")
                
                (pair 2 "H8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P2 
                (sites Bottom)
            )
            
            (regions "Half" P1 
                (expand 
                    (sites Bottom)
                steps:3)
            )
            
            (regions "Half" P2 
                (expand 
                    (sites Top)
                steps:3)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                state:1)
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1" state:1)
                
                (place "Rook2" { "A8" "H8"}
                state:1)
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8" state:1)
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (and 
                            (is In 
                                (last To)
                                
                                (sites Mover "Half")
                            )
                            
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                        
                        (then 
                            (if 
                                (not 
                                    (is Prev Mover)
                                )
                                
                                (moveAgain)
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (is Prev Mover)
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (or 
                                (forEach Piece)
                                
                                (if 
                                    (and 
                                        (= 
                                            (state at:
                                                (mapEntry "King" 
                                                    (mover)
                                                )
                                            )
                                        1 )
                                        
                                        (not 
                                            (is Threatened 
                                                (id "King" Mover)
                                            )
                                        )
                                    )
                                    
                                    (or 
                                        (if 
                                            (and 
                                                (= 
                                                    (state at:
                                                        (mapEntry "RookLeft" 
                                                            (mover)
                                                        )
                                                    )
                                                1 )
                                                
                                                (can Move 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookLeft" 
                                                                (mover)
                                                            )
                                                        )
                                                        E 
                                                        (between 
                                                            (exact 3)
                                                            if:
                                                            (is Empty 
                                                                (to)
                                                            )
                                                        )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                            
                                            (move Slide 
                                                (from 
                                                    (mapEntry "King" 
                                                        (mover)
                                                    )
                                                )
                                                W 
                                                (between 
                                                    (exact 2)
                                                    if:
                                                    (and 
                                                        (is Empty 
                                                            (to)
                                                        )
                                                        
                                                        (not 
                                                            (is Threatened 
                                                                (id "King" Mover )
                                                                at:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                
                                                (to if:True 
                                                    (apply 
                                                        (set State at:
                                                            (from)
                                                        0 )
                                                    )
                                                )
                                                
                                                (then 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookLeft" 
                                                                (mover)
                                                            )
                                                        )
                                                        E 
                                                        (between 
                                                            (exact 3)
                                                        if:True )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                        
                                        (if 
                                            (and 
                                                (= 
                                                    (state at:
                                                        (mapEntry "RookRight" 
                                                            (mover)
                                                        )
                                                    )
                                                1 )
                                                
                                                (can Move 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookRight" 
                                                                (mover)
                                                            )
                                                        )
                                                        W 
                                                        (between 
                                                            (exact 2)
                                                            if:
                                                            (is Empty 
                                                                (to)
                                                            )
                                                        )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                            
                                            (move Slide 
                                                (from 
                                                    (mapEntry "King" 
                                                        (mover)
                                                    )
                                                )
                                                E 
                                                (between 
                                                    (exact 2)
                                                    if:
                                                    (and 
                                                        (is Empty 
                                                            (to)
                                                        )
                                                        
                                                        (not 
                                                            (is Threatened 
                                                                (id "King" Mover )
                                                                at:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                
                                                (to if:True 
                                                    (apply 
                                                        (set State at:
                                                            (from)
                                                        0 )
                                                    )
                                                )
                                                
                                                (then 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookRight" 
                                                                (mover)
                                                            )
                                                        )
                                                        W 
                                                        (between 
                                                            (exact 2)
                                                        if:True )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Sfenj (Ludii 2) ruleset.")
    
    (item "Sfenj (Ludii 3)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                            
                            (then 
                                (set Pending 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (and 
                                (is Pending)
                                
                                (= 
                                    (to)
                                    
                                    (value Pending)
                                )
                            )
                        )
                        
                        (then 
                            (remove 
                                (ahead 
                                    (last To)
                                Backward)
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (move Slide 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "RookLeft" { 
                (pair 1 "A1")
                
                (pair 2 "A8")
                }
            )
            
            (map "RookRight" { 
                (pair 1 "H1")
                
                (pair 2 "H8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P2 
                (sites Bottom)
            )
            
            (regions "Half" P1 
                (expand 
                    (sites Bottom)
                steps:3)
            )
            
            (regions "Half" P2 
                (expand 
                    (sites Top)
                steps:3)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Sfenj (Ludii 3) ruleset.")
    
    (item "Sfenj (Ludii 4)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    }
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (move Slide 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P2 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Sfenj (Ludii 4) ruleset.")
    
    (item "Sfenj (Ludii 5)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "KingnoCross" Each 
                (or { 
                    (move Step 
                        (to if:
                            (not 
                                (is Friend 
                                    (who at:
                                        (to)
                                    )
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                        
                        (then 
                            (if 
                                (and 
                                    (= 1 
                                        (state at:
                                            (last To)
                                        )
                                    )
                                    
                                    (= 
                                        (last To)
                                        
                                        (mapEntry "AheadKing" Mover)
                                    )
                                )
                                
                                (set State at:
                                    (last To)
                                2)
                                
                                (if 
                                    (!= 
                                        (state at:
                                            (last To)
                                        )
                                    0)
                                    
                                    (set State at:
                                        (last To)
                                    0)
                                )
                            )
                        )
                    )
                    
                    (if 
                        (and { 
                            (= 1 
                                (state at:
                                    (from)
                                )
                            )
                            
                            (= 1 
                                (state at:
                                    (mapEntry "RookRight" Mover)
                                )
                            )
                            
                            (is Empty 
                                (mapEntry "KnightKingRightForward" Mover )
                            )
                            }
                        )
                        
                        (move 
                            (from)
                            
                            (to 
                                (mapEntry "KnightKingRightForward" Mover)
                            )
                            
                            (then 
                                (if 
                                    (!= 
                                        (state at:
                                            (last To)
                                        )
                                    0)
                                    
                                    (set State at:
                                        (last To)
                                    0)
                                )
                            )
                        )
                    )
                    
                    (if 
                        (and { 
                            (= 1 
                                (state at:
                                    (from)
                                )
                            )
                            
                            (= 1 
                                (state at:
                                    (mapEntry "RookLeft" Mover)
                                )
                            )
                            
                            (is Empty 
                                (mapEntry "KnightKingLeftForward" Mover )
                            )
                            }
                        )
                        
                        (move 
                            (from)
                            
                            (to 
                                (mapEntry "KnightKingLeftForward" Mover)
                            )
                            
                            (then 
                                (if 
                                    (!= 
                                        (state at:
                                            (last To)
                                        )
                                    0)
                                    
                                    (set State at:
                                        (last To)
                                    0)
                                )
                            )
                        )
                    )
                    
                    (if 
                        (and { 
                            (= 2 
                                (state at:
                                    (from)
                                )
                            )
                            
                            (= 2 
                                (state at:
                                    (regionSite 
                                        (sites Start 
                                            (piece 
                                                (id "King" Mover)
                                            )
                                        )
                                    index:0 )
                                )
                            )
                            }
                        )
                        
                        (move 
                            (from)
                            
                            (to 
                                (mapEntry "KnightKingLeftBackward" Mover)
                            )
                            
                            (then 
                                (set State at:
                                    (last To)
                                0)
                            )
                        )
                    )
                    
                    (if 
                        (and { 
                            (= 2 
                                (state at:
                                    (from)
                                )
                            )
                            
                            (= 3 
                                (state at:
                                    (regionSite 
                                        (sites Start 
                                            (piece 
                                                (id "King" Mover)
                                            )
                                        )
                                    index:0 )
                                )
                            )
                            }
                        )
                        
                        (move 
                            (from)
                            
                            (to 
                                (mapEntry "KnightKingRightBackward" Mover)
                            )
                            
                            (then 
                                (set State at:
                                    (last To)
                                0)
                            )
                        )
                    )
                    }
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (if 
                                (and 
                                    (is In 
                                        (last To)
                                        
                                        (sites Start 
                                            (piece 
                                                (id "King" Mover)
                                            )
                                        )
                                    )
                                    
                                    (= 2 
                                        (state at:
                                            (where "King" Mover)
                                        )
                                    )
                                )
                                
                                (if 
                                    (= 
                                        (last From)
                                        
                                        (mapEntry "RookLeft" Mover)
                                    )
                                    
                                    (set State at:
                                        (last To)
                                    2)
                                    
                                    (set State at:
                                        (last To)
                                    3)
                                )
                                
                                (set State at:
                                    (last To)
                                0)
                            )
                        )
                    )
                )
            maxState:3 )
            
            (piece "BishopnoCross" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "FerznoCross" Each 
                (move Slide 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                            )
                        )
                    )
                )
            )
            
            (piece "Pawn" Each 
                (or { 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    }
                )
            )
            
            (map "RookLeft" { 
                (pair 1 "A1")
                
                (pair 2 "A8")
                }
            )
            
            (map "RookRight" { 
                (pair 1 "H1")
                
                (pair 2 "H8")
                }
            )
            
            (map "AheadKing" { 
                (pair 1 "E2")
                
                (pair 2 "E7")
                }
            )
            
            (map "KnightKingRightForward" { 
                (pair 1 "G2")
                
                (pair 2 "G7")
                }
            )
            
            (map "KnightKingLeftForward" { 
                (pair 1 "C2")
                
                (pair 2 "C7")
                }
            )
            
            (map "KnightKingRightBackward" { 
                (pair 1 "G1")
                
                (pair 2 "G8")
                }
            )
            
            (map "KnightKingLeftBackward" { 
                (pair 1 "C1")
                
                (pair 2 "C8")
                }
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                state:1)
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "BishopnoCross1" { "C1" "F1"}
                )
                
                (place "FerznoCross1" coord:"D1")
                
                (place "KingnoCross1" coord:"E1" state:1)
                
                (place "Rook2" { "A8" "H8"}
                state:1)
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "BishopnoCross2" { "C8" "F8"}
                )
                
                (place "FerznoCross2" coord:"D8")
                
                (place "KingnoCross2" coord:"E8" state:1)
                }
            )
            
            (play 
                (do 
                    (forEach Piece)
                    ifAfterwards:
                    (not 
                        (is Threatened 
                            (id "KingnoCross" Mover)
                        )
                    )
                )
            )
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Sfenj (Ludii 5) ruleset.")
    
    (item "Sfenj (Ludii 6)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                            
                            (then 
                                (set Pending 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (and 
                                (is Pending)
                                
                                (= 
                                    (to)
                                    
                                    (value Pending)
                                )
                            )
                        )
                        
                        (then 
                            (remove 
                                (ahead 
                                    (last To)
                                Backward)
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (move Slide 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "RookLeft" { 
                (pair 1 "A1")
                
                (pair 2 "A8")
                }
            )
            
            (map "RookRight" { 
                (pair 1 "H1")
                
                (pair 2 "H8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P2 
                (sites Bottom)
            )
            
            (regions "Half" P1 
                (expand 
                    (sites Bottom)
                steps:3)
            )
            
            (regions "Half" P2 
                (expand 
                    (sites Top)
                steps:3)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                state:1)
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1" state:1)
                
                (place "Rook2" { "A8" "H8"}
                state:1)
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8" state:1)
                }
            )
            
            (play 
                (if 
                    (is Prev Mover)
                    
                    (move Promote 
                        (last To)
                        
                        (piece { "Queen" "Knight" "Bishop" "Rook"}
                        )
                    Mover )
                    
                    (do 
                        (or 
                            (forEach Piece)
                            
                            (if 
                                (and 
                                    (= 
                                        (state at:
                                            (mapEntry "King" 
                                                (mover)
                                            )
                                        )
                                    1)
                                    
                                    (not 
                                        (is Threatened 
                                            (id "King" Mover)
                                        )
                                    )
                                )
                                
                                (or 
                                    (if 
                                        (and 
                                            (= 
                                                (state at:
                                                    (mapEntry "RookLeft" 
                                                        (mover)
                                                    )
                                                )
                                            1 )
                                            
                                            (can Move 
                                                (slide 
                                                    (from 
                                                        (mapEntry "RookLeft" 
                                                            (mover)
                                                        )
                                                    )
                                                    E 
                                                    (between 
                                                        (exact 3)
                                                        if:
                                                        (is Empty 
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (to if:True 
                                                        (apply 
                                                            (set State at:
                                                                (from)
                                                            0 )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                        
                                        (move Slide 
                                            (from 
                                                (mapEntry "King" 
                                                    (mover)
                                                )
                                            )
                                            W 
                                            (between 
                                                (exact 2)
                                                if:
                                                (and 
                                                    (is Empty 
                                                        (to)
                                                    )
                                                    
                                                    (not 
                                                        (is Threatened 
                                                            (id "King" Mover)
                                                            at:
                                                            (to)
                                                        )
                                                    )
                                                )
                                            )
                                            
                                            (to if:True 
                                                (apply 
                                                    (set State at:
                                                        (from)
                                                    0)
                                                )
                                            )
                                            
                                            (then 
                                                (slide 
                                                    (from 
                                                        (mapEntry "RookLeft" 
                                                            (mover)
                                                        )
                                                    )
                                                    E 
                                                    (between 
                                                        (exact 3)
                                                    if:True)
                                                    
                                                    (to if:True 
                                                        (apply 
                                                            (set State at:
                                                                (from)
                                                            0 )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (and 
                                            (= 
                                                (state at:
                                                    (mapEntry "RookRight" 
                                                        (mover)
                                                    )
                                                )
                                            1 )
                                            
                                            (can Move 
                                                (slide 
                                                    (from 
                                                        (mapEntry "RookRight" 
                                                            (mover)
                                                        )
                                                    )
                                                    W 
                                                    (between 
                                                        (exact 2)
                                                        if:
                                                        (is Empty 
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (to if:True 
                                                        (apply 
                                                            (set State at:
                                                                (from)
                                                            0 )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                        
                                        (move Slide 
                                            (from 
                                                (mapEntry "King" 
                                                    (mover)
                                                )
                                            )
                                            E 
                                            (between 
                                                (exact 2)
                                                if:
                                                (and 
                                                    (is Empty 
                                                        (to)
                                                    )
                                                    
                                                    (not 
                                                        (is Threatened 
                                                            (id "King" Mover)
                                                            at:
                                                            (to)
                                                        )
                                                    )
                                                )
                                            )
                                            
                                            (to if:True 
                                                (apply 
                                                    (set State at:
                                                        (from)
                                                    0)
                                                )
                                            )
                                            
                                            (then 
                                                (slide 
                                                    (from 
                                                        (mapEntry "RookRight" 
                                                            (mover)
                                                        )
                                                    )
                                                    W 
                                                    (between 
                                                        (exact 2)
                                                    if:True)
                                                    
                                                    (to if:True 
                                                        (apply 
                                                            (set State at:
                                                                (from)
                                                            0 )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (or 
                        (no Moves Mover)
                        
                        (= 
                            (counter)
                        99)
                    )
                    
                    (result Mover Draw)
                )
                }
            )
        )
        
    > "The Sfenj (Ludii 6) ruleset.")
    
    (item "Sfenj (Ludii 7)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "Pawn" Each 
                (or { 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (or 
                        (if 
                            (is In 
                                (from)
                                
                                (sites Start 
                                    (piece 
                                        (what at:
                                            (from)
                                        )
                                    )
                                )
                            )
                            
                            (move Slide Forward 
                                (between 
                                    (exact 2)
                                    if:
                                    (is Empty 
                                        (between)
                                    )
                                )
                                
                                (to if:
                                    (is Empty 
                                        (to)
                                    )
                                )
                                
                                (then 
                                    (set Pending 
                                        (ahead 
                                            (last To)
                                        Backward)
                                    )
                                )
                            )
                        )
                        
                        (move Step 
                            (directions { FR FL }
                            )
                            
                            (to if:
                                (and 
                                    (is Pending)
                                    
                                    (= 
                                        (to)
                                        
                                        (value Pending)
                                    )
                                )
                            )
                            
                            (then 
                                (remove 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    }
                    
                    (then 
                        (and 
                            (if 
                                (is In 
                                    (last To)
                                    
                                    (sites Mover "Promotion")
                                )
                                
                                (moveAgain)
                            )
                            
                            (set Counter)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                                
                                (then 
                                    (set Counter)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                    
                                    (then 
                                        (set Counter)
                                    )
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                                
                                (then 
                                    (set Counter)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                    
                                    (then 
                                        (set Counter)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (move Slide 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                                
                                (then 
                                    (set Counter)
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "RookLeft" { 
                (pair 1 "A1")
                
                (pair 2 "A8")
                }
            )
            
            (map "RookRight" { 
                (pair 1 "H1")
                
                (pair 2 "H8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P2 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                )
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1")
                
                (place "Rook2" { "A8" "H8"}
                )
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8")
                }
            )
            phases:{ 
            (phase "Opening" 
                (play 
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                        
                        (then 
                            (and 
                                (set Value Mover 
                                    (+ 1 
                                        (value Player Mover)
                                    )
                                )
                                
                                (if 
                                    (!= 
                                        (value Player Mover)
                                    1)
                                    
                                    (moveAgain)
                                )
                            )
                        )
                    )
                )
                
                (nextPhase Mover 
                    (= 2 
                        (value Player Mover)
                    )
                "Playing")
            )
            
            (phase "Playing" 
                (play 
                    (if 
                        (is Prev Mover)
                        
                        (move Promote 
                            (last To)
                            
                            (piece { "Queen" "Knight" "Bishop" "Rook"}
                            )
                        Mover )
                        
                        (do 
                            (forEach Piece)
                            ifAfterwards:
                            (not 
                                (is Threatened 
                                    (id "King" Mover)
                                )
                            )
                        )
                    )
                )
            )
            }
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Sfenj (Ludii 7) ruleset.")
    
    (item "Sfenj (Ludii 8)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "Pawn" Each 
                (or { 
                    (if 
                        (is In 
                            (from)
                            
                            (sites Start 
                                (piece 
                                    (what at:
                                        (from)
                                    )
                                )
                            )
                        )
                        
                        (move Slide Forward 
                            (between 
                                (exact 2)
                                if:
                                (is Empty 
                                    (between)
                                )
                            )
                            
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                            
                            (then 
                                (set Pending 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (and 
                                (is Pending)
                                
                                (= 
                                    (to)
                                    
                                    (value Pending)
                                )
                            )
                        )
                        
                        (then 
                            (remove 
                                (ahead 
                                    (last To)
                                Backward)
                            )
                        )
                    )
                    }
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (move Slide 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "RookLeft" { 
                (pair 1 "A1")
                
                (pair 2 "A8")
                }
            )
            
            (map "RookRight" { 
                (pair 1 "H1")
                
                (pair 2 "H8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P2 
                (sites Bottom)
            )
            
            (regions "Half" P1 
                (expand 
                    (sites Bottom)
                steps:3)
            )
            
            (regions "Half" P2 
                (expand 
                    (sites Top)
                steps:3)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                state:1)
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1" state:1)
                
                (place "Rook2" { "A8" "H8"}
                state:1)
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8" state:1)
                }
            )
            
            (play 
                (if 
                    (and 
                        (not 
                            (is Pending)
                        )
                        
                        (is Prev Mover)
                    )
                    
                    (or { 
                        (if 
                            (is In 
                                (id "Queen" Mover)
                                
                                (values Remembered "CapturedPieces")
                            )
                            
                            (move Promote 
                                (last To)
                                
                                (piece { "Queen"}
                                )
                            Mover)
                        )
                        
                        (if 
                            (is In 
                                (id "Knight" Mover)
                                
                                (values Remembered "CapturedPieces")
                            )
                            
                            (move Promote 
                                (last To)
                                
                                (piece { "Knight"}
                                )
                            Mover )
                        )
                        
                        (if 
                            (is In 
                                (id "Rook" Mover)
                                
                                (values Remembered "CapturedPieces")
                            )
                            
                            (move Promote 
                                (last To)
                                
                                (piece { "Rook"}
                                )
                            Mover)
                        )
                        
                        (if 
                            (is In 
                                (id "Bishop" Mover)
                                
                                (values Remembered "CapturedPieces")
                            )
                            
                            (move Promote 
                                (last To)
                                
                                (piece { "Bishop"}
                                )
                            Mover )
                        )
                        }
                    )
                    
                    (do 
                        (if 
                            (is Pending)
                            
                            (or 
                                (move Pass)
                                
                                (forEach Piece "Pawn" Mover)
                            )
                            
                            (or 
                                (forEach Piece)
                                
                                (if 
                                    (and 
                                        (= 
                                            (state at:
                                                (mapEntry "King" 
                                                    (mover)
                                                )
                                            )
                                        1)
                                        
                                        (not 
                                            (is Threatened 
                                                (id "King" Mover)
                                            )
                                        )
                                    )
                                    
                                    (or 
                                        (if 
                                            (and 
                                                (= 
                                                    (state at:
                                                        (mapEntry "RookLeft" 
                                                            (mover)
                                                        )
                                                    )
                                                1 )
                                                
                                                (can Move 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookLeft" 
                                                                (mover)
                                                            )
                                                        )
                                                        E 
                                                        (between 
                                                            (exact 3)
                                                            if:
                                                            (is Empty 
                                                                (to)
                                                            )
                                                        )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                            
                                            (move Slide 
                                                (from 
                                                    (mapEntry "King" 
                                                        (mover)
                                                    )
                                                )
                                                W 
                                                (between 
                                                    (exact 2)
                                                    if:
                                                    (and 
                                                        (is Empty 
                                                            (to)
                                                        )
                                                        
                                                        (not 
                                                            (is Threatened 
                                                                (id "King" Mover)
                                                                at:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                
                                                (to if:True 
                                                    (apply 
                                                        (set State at:
                                                            (from)
                                                        0)
                                                    )
                                                )
                                                
                                                (then 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookLeft" 
                                                                (mover)
                                                            )
                                                        )
                                                        E 
                                                        (between 
                                                            (exact 3)
                                                        if:True )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                        
                                        (if 
                                            (and 
                                                (= 
                                                    (state at:
                                                        (mapEntry "RookRight" 
                                                            (mover)
                                                        )
                                                    )
                                                1 )
                                                
                                                (can Move 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookRight" 
                                                                (mover)
                                                            )
                                                        )
                                                        W 
                                                        (between 
                                                            (exact 2)
                                                            if:
                                                            (is Empty 
                                                                (to)
                                                            )
                                                        )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                            
                                            (move Slide 
                                                (from 
                                                    (mapEntry "King" 
                                                        (mover)
                                                    )
                                                )
                                                E 
                                                (between 
                                                    (exact 2)
                                                    if:
                                                    (and 
                                                        (is Empty 
                                                            (to)
                                                        )
                                                        
                                                        (not 
                                                            (is Threatened 
                                                                (id "King" Mover)
                                                                at:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                
                                                (to if:True 
                                                    (apply 
                                                        (set State at:
                                                            (from)
                                                        0)
                                                    )
                                                )
                                                
                                                (then 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookRight" 
                                                                (mover)
                                                            )
                                                        )
                                                        W 
                                                        (between 
                                                            (exact 2)
                                                        if:True )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                    )
                    
                    (then 
                        (and 
                            (if 
                                (or 
                                    (is Threatened 
                                        (id "Queen" P1)
                                    )
                                    
                                    (is Threatened 
                                        (id "Queen" P2)
                                    )
                                )
                                
                                (note "Gardez la reine")
                            )
                            
                            (if 
                                (and 
                                    (= 
                                        (state at:
                                            (where "King" Next)
                                        )
                                    1)
                                    
                                    (is Threatened 
                                        (id "King" Next)
                                    )
                                )
                                
                                (set State at:
                                    (where "King" Next)
                                0)
                            )
                        )
                    )
                )
            )
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Sfenj (Ludii 8) ruleset.")
    
    (item "Sfenj (Ludii 9)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "Pawn" Each 
                (or { 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (or 
                        (if 
                            (is In 
                                (from)
                                
                                (sites Start 
                                    (piece 
                                        (what at:
                                            (from)
                                        )
                                    )
                                )
                            )
                            
                            (move Slide Forward 
                                (between 
                                    (exact 2)
                                    if:
                                    (is Empty 
                                        (between)
                                    )
                                )
                                
                                (to if:
                                    (is Empty 
                                        (to)
                                    )
                                )
                                
                                (then 
                                    (set Pending 
                                        (ahead 
                                            (last To)
                                        Backward)
                                    )
                                )
                            )
                        )
                        
                        (move Step 
                            (directions { FR FL }
                            )
                            
                            (to if:
                                (and 
                                    (is Pending)
                                    
                                    (= 
                                        (to)
                                        
                                        (value Pending)
                                    )
                                )
                            )
                            
                            (then 
                                (remove 
                                    (ahead 
                                        (last To)
                                    Backward)
                                )
                            )
                        )
                    )
                    }
                    
                    (then 
                        (and 
                            (if 
                                (is In 
                                    (last To)
                                    
                                    (sites Mover "Promotion")
                                )
                                
                                (moveAgain)
                            )
                            
                            (set Counter)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                                
                                (then 
                                    (set Counter)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                    
                                    (then 
                                        (set Counter)
                                    )
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                                
                                (then 
                                    (set Counter)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                    
                                    (then 
                                        (set Counter)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (move Slide 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                                
                                (then 
                                    (set Counter)
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "RookLeft" { 
                (pair 1 "A1")
                
                (pair 2 "A8")
                }
            )
            
            (map "RookRight" { 
                (pair 1 "H1")
                
                (pair 2 "H8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P2 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                state:1)
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1" state:1)
                
                (place "Rook2" { "A8" "H8"}
                state:1)
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8" state:1)
                }
            )
            
            (play 
                (if 
                    (is Prev Mover)
                    
                    (move Promote 
                        (last To)
                        
                        (piece { "Queen" "Knight" "Bishop" "Rook"}
                        )
                    Mover )
                    
                    (do 
                        (or 
                            (forEach Piece)
                            
                            (if 
                                (and 
                                    (= 
                                        (state at:
                                            (mapEntry "King" 
                                                (mover)
                                            )
                                        )
                                    1)
                                    
                                    (not 
                                        (is Threatened 
                                            (id "King" Mover)
                                        )
                                    )
                                )
                                
                                (or 
                                    (if 
                                        (and 
                                            (= 
                                                (state at:
                                                    (mapEntry "RookLeft" 
                                                        (mover)
                                                    )
                                                )
                                            1 )
                                            
                                            (can Move 
                                                (slide 
                                                    (from 
                                                        (mapEntry "RookLeft" 
                                                            (mover)
                                                        )
                                                    )
                                                    E 
                                                    (between 
                                                        (exact 3)
                                                        if:
                                                        (is Empty 
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (to if:True 
                                                        (apply 
                                                            (set State at:
                                                                (from)
                                                            0 )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                        
                                        (move Slide 
                                            (from 
                                                (mapEntry "King" 
                                                    (mover)
                                                )
                                            )
                                            W 
                                            (between 
                                                (exact 2)
                                                if:
                                                (and 
                                                    (is Empty 
                                                        (to)
                                                    )
                                                    
                                                    (not 
                                                        (is Threatened 
                                                            (id "King" Mover)
                                                            at:
                                                            (to)
                                                        )
                                                    )
                                                )
                                            )
                                            
                                            (to if:True 
                                                (apply 
                                                    (set State at:
                                                        (from)
                                                    0)
                                                )
                                            )
                                            
                                            (then 
                                                (slide 
                                                    (from 
                                                        (mapEntry "RookLeft" 
                                                            (mover)
                                                        )
                                                    )
                                                    E 
                                                    (between 
                                                        (exact 3)
                                                    if:True)
                                                    
                                                    (to if:True 
                                                        (apply 
                                                            (set State at:
                                                                (from)
                                                            0 )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                    
                                    (if 
                                        (and 
                                            (= 
                                                (state at:
                                                    (mapEntry "RookRight" 
                                                        (mover)
                                                    )
                                                )
                                            1 )
                                            
                                            (can Move 
                                                (slide 
                                                    (from 
                                                        (mapEntry "RookRight" 
                                                            (mover)
                                                        )
                                                    )
                                                    W 
                                                    (between 
                                                        (exact 2)
                                                        if:
                                                        (is Empty 
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (to if:True 
                                                        (apply 
                                                            (set State at:
                                                                (from)
                                                            0 )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                        
                                        (move Slide 
                                            (from 
                                                (mapEntry "King" 
                                                    (mover)
                                                )
                                            )
                                            E 
                                            (between 
                                                (exact 2)
                                                if:
                                                (and 
                                                    (is Empty 
                                                        (to)
                                                    )
                                                    
                                                    (not 
                                                        (is Threatened 
                                                            (id "King" Mover)
                                                            at:
                                                            (to)
                                                        )
                                                    )
                                                )
                                            )
                                            
                                            (to if:True 
                                                (apply 
                                                    (set State at:
                                                        (from)
                                                    0)
                                                )
                                            )
                                            
                                            (then 
                                                (slide 
                                                    (from 
                                                        (mapEntry "RookRight" 
                                                            (mover)
                                                        )
                                                    )
                                                    W 
                                                    (between 
                                                        (exact 2)
                                                    if:True)
                                                    
                                                    (to if:True 
                                                        (apply 
                                                            (set State at:
                                                                (from)
                                                            0 )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (or 
                        (no Moves Mover)
                        
                        (= 
                            (counter)
                        99)
                    )
                    
                    (result Mover Draw)
                )
                }
            )
        )
        
    > "The Sfenj (Ludii 9) ruleset.")
    
    (item "Sfenj (Ludii 10)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "Pawn" Each 
                (or { 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL }
                        )
                        
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    }
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                            )
                        )
                    )
                )
            )
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "BishopnoCross" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (move Slide 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (remove 
                                (to)
                            )
                        )
                    )
                )
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" { "F4" "G4" "H4" "B3" "C3" "D3" "E3" "A2"}
                )
                
                (place "Pawn2" { "H7" "H6" "G6" "F6" "E6" "A5" "B5" "C5"}
                )
                
                (place "Rook1" { "C2" "D1"}
                )
                
                (place "Knight1" { "B1" "H2"}
                )
                
                (place "BishopnoCross1" { "E1" "F1"}
                )
                
                (place "Queen1" coord:"D2")
                
                (place "KingnoCross1" coord:"C1")
                
                (place "Rook2" { "C7" "B8"}
                )
                
                (place "Knight2" { "A7" "H8"}
                )
                
                (place "BishopnoCross2" { "F7" "G7"}
                )
                
                (place "Queen2" coord:"B7")
                
                (place "KingnoCross2" coord:"C8")
                }
            )
            
            (play 
                (do 
                    (forEach Piece)
                    ifAfterwards:
                    (not 
                        (is Threatened 
                            (id "KingnoCross" Mover)
                        )
                    )
                )
            )
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Sfenj (Ludii 10) ruleset.")
    
    (item "Sfenj (Ludii 11)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 8)
            )
            
            (piece "Pawn" Each 
                (if 
                    (!= 
                        (last To)
                        
                        (from)
                    )
                    
                    (or { 
                        (if 
                            (and 
                                (or { 
                                    (is In 
                                        (id "Queen" Mover)
                                        
                                        (values Remembered "CapturedPieces" )
                                    )
                                    
                                    (is In 
                                        (id "Knight" Mover)
                                        
                                        (values Remembered "CapturedPieces" )
                                    )
                                    
                                    (is In 
                                        (id "Rook" Mover)
                                        
                                        (values Remembered "CapturedPieces" )
                                    )
                                    
                                    (is In 
                                        (id "Bishop" Mover)
                                        
                                        (values Remembered "CapturedPieces" )
                                    )
                                    }
                                )
                                
                                (is In 
                                    (from)
                                    
                                    (sites Mover "Promotion")
                                )
                            )
                            
                            (or { 
                                (if 
                                    (is In 
                                        (id "Queen" Mover)
                                        
                                        (values Remembered "CapturedPieces" )
                                    )
                                    
                                    (move Promote 
                                        (from)
                                        
                                        (piece { "Queen"}
                                        )
                                    Mover )
                                )
                                
                                (if 
                                    (is In 
                                        (id "Knight" Mover)
                                        
                                        (values Remembered "CapturedPieces" )
                                    )
                                    
                                    (move Promote 
                                        (from)
                                        
                                        (piece { "Knight"}
                                        )
                                    Mover )
                                )
                                
                                (if 
                                    (is In 
                                        (id "Rook" Mover)
                                        
                                        (values Remembered "CapturedPieces" )
                                    )
                                    
                                    (move Promote 
                                        (from)
                                        
                                        (piece { "Rook"}
                                        )
                                    Mover )
                                )
                                
                                (if 
                                    (is In 
                                        (id "Bishop" Mover)
                                        
                                        (values Remembered "CapturedPieces" )
                                    )
                                    
                                    (move Promote 
                                        (from)
                                        
                                        (piece { "Bishop"}
                                        )
                                    Mover )
                                )
                                }
                                
                                (then 
                                    (set Pending)
                                )
                            )
                        )
                        
                        (if 
                            (is In 
                                (from)
                                
                                (sites Start 
                                    (piece 
                                        (what at:
                                            (from)
                                        )
                                    )
                                )
                            )
                            
                            (move Slide Forward 
                                (between 
                                    (exact 2)
                                    if:
                                    (is Empty 
                                        (between)
                                    )
                                )
                                
                                (to if:
                                    (is Empty 
                                        (to)
                                    )
                                )
                            )
                        )
                        
                        (move Step Forward 
                            (to if:
                                (is Empty 
                                    (to)
                                )
                            )
                        )
                        
                        (move Step 
                            (directions { FR FL }
                            )
                            
                            (to if:
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (apply 
                                    (and 
                                        (remember Value "CapturedPieces" 
                                            (what at:
                                                (to)
                                            )
                                        )
                                        
                                        (remove 
                                            (to)
                                        )
                                    )
                                )
                            )
                        )
                        }
                        
                        (then 
                            (and 
                                (if 
                                    (and 
                                        (is In 
                                            (last To)
                                            
                                            (sites Mover "Promotion")
                                        )
                                        
                                        (or { 
                                            (is In 
                                                (id "Queen" Mover)
                                                
                                                (values Remembered "CapturedPieces" )
                                            )
                                            
                                            (is In 
                                                (id "Knight" Mover)
                                                
                                                (values Remembered "CapturedPieces" )
                                            )
                                            
                                            (is In 
                                                (id "Rook" Mover)
                                                
                                                (values Remembered "CapturedPieces" )
                                            )
                                            
                                            (is In 
                                                (id "Bishop" Mover)
                                                
                                                (values Remembered "CapturedPieces" )
                                            )
                                            }
                                        )
                                    )
                                    
                                    (moveAgain)
                                )
                                
                                (if 
                                    (and 
                                        (not 
                                            (is Prev Mover)
                                        )
                                        
                                        (<= 
                                            (count Turns)
                                        2)
                                    )
                                    
                                    (and 
                                        (set Pending)
                                        
                                        (moveAgain)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (and 
                                    (remember Value "CapturedPieces" 
                                        (what at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "King" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (and 
                                    (remember Value "CapturedPieces" 
                                        (what at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (= 
                                (state at:
                                    (last To)
                                )
                            1)
                            
                            (set State at:
                                (last To)
                            0)
                        )
                    )
                )
            )
            
            (piece "Bishop" Each 
                (move Slide Diagonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (and 
                                    (remember Value "CapturedPieces" 
                                        (what at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F }
                    { F F L F }
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (and 
                                    (remember Value "CapturedPieces" 
                                        (what at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Queen" Each 
                (move Slide 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (and 
                                    (remember Value "CapturedPieces" 
                                        (what at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (map "King" { 
                (pair 1 "E1")
                
                (pair 2 "E8")
                }
            )
            
            (map "RookLeft" { 
                (pair 1 "A1")
                
                (pair 2 "A8")
                }
            )
            
            (map "RookRight" { 
                (pair 1 "H1")
                
                (pair 2 "H8")
                }
            )
            
            (regions "Promotion" P1 
                (sites Top)
            )
            
            (regions "Promotion" P2 
                (sites Bottom)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 1)
                )
                
                (place "Pawn2" 
                    (sites Row 6)
                )
                
                (place "Rook1" { "A1" "H1"}
                state:1)
                
                (place "Knight1" { "B1" "G1"}
                )
                
                (place "Bishop1" { "C1" "F1"}
                )
                
                (place "Queen1" coord:"D1")
                
                (place "King1" coord:"E1" state:1)
                
                (place "Rook2" { "A8" "H8"}
                state:1)
                
                (place "Knight2" { "B8" "G8"}
                )
                
                (place "Bishop2" { "C8" "F8"}
                )
                
                (place "Queen2" coord:"D8")
                
                (place "King2" coord:"E8" state:1)
                }
            )
            
            (play 
                (if 
                    (and 
                        (not 
                            (is Pending)
                        )
                        
                        (is Prev Mover)
                    )
                    
                    (or { 
                        (if 
                            (is In 
                                (id "Queen" Mover)
                                
                                (values Remembered "CapturedPieces")
                            )
                            
                            (move Promote 
                                (last To)
                                
                                (piece { "Queen"}
                                )
                            Mover)
                        )
                        
                        (if 
                            (is In 
                                (id "Knight" Mover)
                                
                                (values Remembered "CapturedPieces")
                            )
                            
                            (move Promote 
                                (last To)
                                
                                (piece { "Knight"}
                                )
                            Mover )
                        )
                        
                        (if 
                            (is In 
                                (id "Rook" Mover)
                                
                                (values Remembered "CapturedPieces")
                            )
                            
                            (move Promote 
                                (last To)
                                
                                (piece { "Rook"}
                                )
                            Mover)
                        )
                        
                        (if 
                            (is In 
                                (id "Bishop" Mover)
                                
                                (values Remembered "CapturedPieces")
                            )
                            
                            (move Promote 
                                (last To)
                                
                                (piece { "Bishop"}
                                )
                            Mover )
                        )
                        }
                    )
                    
                    (do 
                        (if 
                            (is Pending)
                            
                            (or 
                                (move Pass)
                                
                                (forEach Piece "Pawn" Mover)
                            )
                            
                            (or 
                                (forEach Piece)
                                
                                (if 
                                    (and 
                                        (= 
                                            (state at:
                                                (mapEntry "King" 
                                                    (mover)
                                                )
                                            )
                                        1)
                                        
                                        (not 
                                            (is Threatened 
                                                (id "King" Mover)
                                            )
                                        )
                                    )
                                    
                                    (or 
                                        (if 
                                            (and 
                                                (= 
                                                    (state at:
                                                        (mapEntry "RookLeft" 
                                                            (mover)
                                                        )
                                                    )
                                                1 )
                                                
                                                (can Move 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookLeft" 
                                                                (mover)
                                                            )
                                                        )
                                                        E 
                                                        (between 
                                                            (exact 3)
                                                            if:
                                                            (is Empty 
                                                                (to)
                                                            )
                                                        )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                            
                                            (move Slide 
                                                (from 
                                                    (mapEntry "King" 
                                                        (mover)
                                                    )
                                                )
                                                W 
                                                (between 
                                                    (exact 2)
                                                    if:
                                                    (and 
                                                        (is Empty 
                                                            (to)
                                                        )
                                                        
                                                        (not 
                                                            (is Threatened 
                                                                (id "King" Mover)
                                                                at:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                
                                                (to if:True 
                                                    (apply 
                                                        (set State at:
                                                            (from)
                                                        0)
                                                    )
                                                )
                                                
                                                (then 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookLeft" 
                                                                (mover)
                                                            )
                                                        )
                                                        E 
                                                        (between 
                                                            (exact 3)
                                                        if:True )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                        
                                        (if 
                                            (and 
                                                (= 
                                                    (state at:
                                                        (mapEntry "RookRight" 
                                                            (mover)
                                                        )
                                                    )
                                                1 )
                                                
                                                (can Move 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookRight" 
                                                                (mover)
                                                            )
                                                        )
                                                        W 
                                                        (between 
                                                            (exact 2)
                                                            if:
                                                            (is Empty 
                                                                (to)
                                                            )
                                                        )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                            
                                            (move Slide 
                                                (from 
                                                    (mapEntry "King" 
                                                        (mover)
                                                    )
                                                )
                                                E 
                                                (between 
                                                    (exact 2)
                                                    if:
                                                    (and 
                                                        (is Empty 
                                                            (to)
                                                        )
                                                        
                                                        (not 
                                                            (is Threatened 
                                                                (id "King" Mover)
                                                                at:
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                                
                                                (to if:True 
                                                    (apply 
                                                        (set State at:
                                                            (from)
                                                        0)
                                                    )
                                                )
                                                
                                                (then 
                                                    (slide 
                                                        (from 
                                                            (mapEntry "RookRight" 
                                                                (mover)
                                                            )
                                                        )
                                                        W 
                                                        (between 
                                                            (exact 2)
                                                        if:True )
                                                        
                                                        (to if:True 
                                                            (apply 
                                                                (set State at:
                                                                    (from)
                                                                0 )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "King" Mover)
                            )
                        )
                    )
                    
                    (then 
                        (and 
                            (if 
                                (or 
                                    (is Threatened 
                                        (id "Queen" P1)
                                    )
                                    
                                    (is Threatened 
                                        (id "Queen" P2)
                                    )
                                )
                                
                                (note "Gardez la reine")
                            )
                            
                            (if 
                                (and 
                                    (= 
                                        (state at:
                                            (where "King" Next)
                                        )
                                    1)
                                    
                                    (is Threatened 
                                        (id "King" Next)
                                    )
                                )
                                
                                (set State at:
                                    (where "King" Next)
                                0)
                            )
                        )
                    )
                )
            )
            
            (end 
                (if 
                    (and 
                        (is Threatened 
                            (id "King" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "King" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
            )
        )
        
    > "The Sfenj (Ludii 11) ruleset.")
    
    (item "Incomplete"
        <
        ("TwoPlayersNorthSouth") 
        (equipment { 
            (board (square 8)) 
            [#]
        })
        (rules [#])
        >
        "The incomplete ruleset."
    )
    
})

//------------------------------------------------------------------------------

(rulesets {
    
    (ruleset "Ruleset/Sfenj (Ludii 1) (Reconstructed)" {
        "Variant/Sfenj (Ludii 1)"
    })
    (ruleset "Ruleset/Sfenj (Ludii 2) (Reconstructed)" {
        "Variant/Sfenj (Ludii 2)"
    })
    (ruleset "Ruleset/Sfenj (Ludii 3) (Reconstructed)" {
        "Variant/Sfenj (Ludii 3)"
    })
    (ruleset "Ruleset/Sfenj (Ludii 4) (Reconstructed)" {
        "Variant/Sfenj (Ludii 4)"
    })
    (ruleset "Ruleset/Sfenj (Ludii 5) (Reconstructed)" {
        "Variant/Sfenj (Ludii 5)"
    })
    (ruleset "Ruleset/Sfenj (Ludii 6) (Reconstructed)" {
        "Variant/Sfenj (Ludii 6)"
    })
    (ruleset "Ruleset/Sfenj (Ludii 7) (Reconstructed)" {
        "Variant/Sfenj (Ludii 7)"
    })
    (ruleset "Ruleset/Sfenj (Ludii 8) (Reconstructed)" {
        "Variant/Sfenj (Ludii 8)"
    })
    (ruleset "Ruleset/Sfenj (Ludii 9) (Reconstructed)" {
        "Variant/Sfenj (Ludii 9)"
    })
    (ruleset "Ruleset/Sfenj (Ludii 10) (Reconstructed)" {
        "Variant/Sfenj (Ludii 10)"
    })
    (ruleset "Ruleset/Sfenj (Ludii 11) (Reconstructed)" {
        "Variant/Sfenj (Ludii 11)"
    }) 
    
    (ruleset "Ruleset/Historical Information (Incomplete)" {
        "Variant/Incomplete"
    })
    
})

//------------------------------------------------------------------------------

(metadata 
    
    (info
        {
        (description "Sfenj is a capturing game played by the Tungusic people of Northern Asia. It was played with a set of pieces similar to Chess, but the Kings were colored red.")
        (useFor "Ruleset/Historical Information (Incomplete)" (rules "8x8 board. Chess-like game."))
        (useFor "Ruleset/Historical Information (Incomplete)" (source "DLP evidence."))
        (useFor "Ruleset/Historical Information (Incomplete)" (id "1410"))
        (useFor "Ruleset/Sfenj (Ludii 1) (Reconstructed)" (rules "The game Sfenj is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the bottom sites of the board for P2 
                All players play with KingnoCrosses, Rooks, Camels, Knights, Pawns and Dogs.
                Rules for Pieces:
                Camels hop diagonal.
                Dogs remove pieces at to then step diagonal.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left or if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty if the to location of the last move is in Promotion or Promotion, a piece of the moving player the to location of the last move, this piece can promote into Dog.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Camel for player one on sites: C1 and F1.
                Place a Dog for player one on site D1.
                Place a KingnoCross for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Camel for player two on sites: C8 and F8.
                Place a Dog for player two on site D8.
                Place a KingnoCross for player two on site E8..
                Rules: 
                Move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces.
                
        "))
        (useFor "Ruleset/Sfenj (Ludii 1) (Reconstructed)" (id "3813"))
        (useFor "Ruleset/Sfenj (Ludii 2) (Reconstructed)" (rules "The game Sfenj is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the bottom sites of the board for P2
                Half: the bottom sites of the board expanded by 3 steps for P1
                Half: the top sites of the board expanded by 3 steps for P2 
                All players play with Pawns, Rooks, Kings, Bishops, Knights and Queens.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward or remove pieces at to then step forward-right or forward-left or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion or Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then if not in the same turn, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces or if State at King of current moving player is equal to 1 and not King of the moving player is threatened, if State at RookLeft of current moving player is equal to 1 and can move slide from RookLeft of current moving player in the east direction through empty, slide from King of current moving player in the west direction through empty and not King of the moving player is threatened then slide from RookLeft of current moving player in the east direction through true or if State at RookRight of current moving player is equal to 1 and can move slide from RookRight of current moving player in the west direction through empty, slide from King of current moving player in the east direction through empty and not King of the moving player is threatened then slide from RookRight of current moving player in the west direction through true.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Sfenj (Ludii 2) (Reconstructed)" (id "3814"))
        (useFor "Ruleset/Sfenj (Ludii 3) (Reconstructed)" (rules "The game Sfenj is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the bottom sites of the board for P2
                Half: the bottom sites of the board expanded by 3 steps for P1
                Half: the top sites of the board expanded by 3 steps for P2 
                All players play with Pawns, Rooks, Kings, Bishops, Knights and Queens.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward or remove pieces at to then step forward-right or forward-left or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion or Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Sfenj (Ludii 3) (Reconstructed)" (id "3815"))
        (useFor "Ruleset/Sfenj (Ludii 4) (Reconstructed)" (rules "The game Sfenj is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the bottom sites of the board for P2 
                All players play with Pawns, Rooks, Kings, Bishops, Knights and Queens.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remove pieces at to then step forward-right or forward-left.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Sfenj (Ludii 4) (Reconstructed)" (id "3816"))
        (useFor "Ruleset/Sfenj (Ludii 5) (Reconstructed)" (rules "The game Sfenj is played by two players on a 8x8 rectangle board with square tiling. 
                All players play with KingnoCrosses, Rooks, BishopnoCrosses, Knights, FerznoCrosses and Pawns.
                Rules for Pieces:
                BishopnoCrosses slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                FerznoCrosses slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells.
                KingnoCrosses remove pieces at to then step adjacent then if 1 is equal to State at the to location of the last move and the to location of the last move is equal to AheadKing of the moving player, set the state of the Cell the to location of the last move to 2, else if State at the to location of the last move is not equal to 0, set the state of the Cell the to location of the last move to 0 or if 1 is equal to State at the location of the piece, 1 is equal to State at RookRight of the moving player and empty, from cell in the location of the piece to cell KnightKingRightForward of the moving player moveRule: true then if State at the to location of the last move is not equal to 0, set the state of the Cell the to location of the last move to 0 or if 1 is equal to State at the location of the piece, 1 is equal to State at RookLeft of the moving player and empty, from cell in the location of the piece to cell KnightKingLeftForward of the moving player moveRule: true then if State at the to location of the last move is not equal to 0, set the state of the Cell the to location of the last move to 0 or if 2 is equal to State at the location of the piece and 2 is equal to State at site 0 of region start position, from cell in the location of the piece to cell KnightKingLeftBackward of the moving player moveRule: true then set the state of the Cell the to location of the last move to 0 or if 2 is equal to State at the location of the piece and 3 is equal to State at site 0 of region start position, from cell in the location of the piece to cell KnightKingRightBackward of the moving player moveRule: true then set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, if the to location of the last move is in start position and 2 is equal to State at King of the moving player is in, if the from location of the last move is equal to RookLeft of the moving player, set the state of the Cell the to location of the last move to 2, else set the state of the Cell the to location of the last move to 3, else set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a BishopnoCross for player one on sites: C1 and F1.
                Place a FerznoCross for player one on site D1.
                Place a KingnoCross for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a BishopnoCross for player two on sites: C8 and F8.
                Place a FerznoCross for player two on site D8.
                Place a KingnoCross for player two on site E8..
                Rules: 
                Move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Sfenj (Ludii 5) (Reconstructed)" (id "3817"))
        (useFor "Ruleset/Sfenj (Ludii 6) (Reconstructed)" (rules "The game Sfenj is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the bottom sites of the board for P2
                Half: the bottom sites of the board expanded by 3 steps for P1
                Half: the top sites of the board expanded by 3 steps for P2 
                All players play with Pawns, Rooks, Kings, Bishops, Knights and Queens.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward or remove pieces at to then step forward-right or forward-left or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion or Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                If in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces or if State at King of current moving player is equal to 1 and not King of the moving player is threatened, if State at RookLeft of current moving player is equal to 1 and can move slide from RookLeft of current moving player in the east direction through empty, slide from King of current moving player in the west direction through empty and not King of the moving player is threatened then slide from RookLeft of current moving player in the east direction through true or if State at RookRight of current moving player is equal to 1 and can move slide from RookRight of current moving player in the west direction through empty, slide from King of current moving player in the east direction through empty and not King of the moving player is threatened then slide from RookRight of current moving player in the west direction through true.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins If the moving player cannot move or Counter is equal to 99, it's a draw.
                
        "))
        (useFor "Ruleset/Sfenj (Ludii 6) (Reconstructed)" (id "3818"))
        (useFor "Ruleset/Sfenj (Ludii 7) (Reconstructed)" (rules "The game Sfenj is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the bottom sites of the board for P2 
                All players play with Pawns, Rooks, Kings, Bishops, Knights and Queens.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then set the current counter of the game to -1 then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left or if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion or Promotion, move again and set the current counter of the game to -1.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                Move one of your pieces then set the value of Player the moving player to add the following values: [1,the value of Player the moving player] and if the value of Player the moving player is not equal to 1, move again if in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Sfenj (Ludii 7) (Reconstructed)" (id "3819"))
        (useFor "Ruleset/Sfenj (Ludii 8) (Reconstructed)" (rules "The game Sfenj is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the bottom sites of the board for P2
                Half: the bottom sites of the board expanded by 3 steps for P1
                Half: the top sites of the board expanded by 3 steps for P2 
                All players play with Pawns, Rooks, Kings, Bishops, Knights and Queens.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward or remove pieces at to then step forward-right or forward-left or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion or Promotion, move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                If not a state is pending and in the same turn, if [Queen of the moving player] is in all remembered values, a piece of the moving player the to location of the last move, this piece can promote into Queen or if [Knight of the moving player] is in all remembered values, a piece of the moving player the to location of the last move, this piece can promote into Knight or if [Rook of the moving player] is in all remembered values, a piece of the moving player the to location of the last move, this piece can promote into Rook or if [Bishop of the moving player] is in all remembered values, a piece of the moving player the to location of the last move, this piece can promote into Bishop, else if a state is pending, pass or move one of your pieces, else move one of your pieces or if State at King of current moving player is equal to 1 and not King of the moving player is threatened, if State at RookLeft of current moving player is equal to 1 and can move slide from RookLeft of current moving player in the east direction through empty, slide from King of current moving player in the west direction through empty and not King of the moving player is threatened then slide from RookLeft of current moving player in the east direction through true or if State at RookRight of current moving player is equal to 1 and can move slide from RookRight of current moving player in the west direction through empty, slide from King of current moving player in the east direction through empty and not King of the moving player is threatened then slide from RookRight of current moving player in the west direction through true.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Sfenj (Ludii 8) (Reconstructed)" (id "3820"))
        (useFor "Ruleset/Sfenj (Ludii 9) (Reconstructed)" (rules "The game Sfenj is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the bottom sites of the board for P2 
                All players play with Pawns, Rooks, Kings, Bishops, Knights and Queens.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remove pieces at to then set the current counter of the game to -1 then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left or if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty then set the site  the Cell 1 steps ahead of the to location of the last move in the direction backward to pending or step forward-right or forward-left then remove pieces at  the Cell 1 steps ahead of the to location of the last move in the direction backward if the to location of the last move is in Promotion or Promotion, move again and set the current counter of the game to -1.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                If in the same turn, a piece of the moving player the to location of the last move, this piece can promote into Queen, Knight, Bishop or Rook, else move one of your pieces or if State at King of current moving player is equal to 1 and not King of the moving player is threatened, if State at RookLeft of current moving player is equal to 1 and can move slide from RookLeft of current moving player in the east direction through empty, slide from King of current moving player in the west direction through empty and not King of the moving player is threatened then slide from RookLeft of current moving player in the east direction through true or if State at RookRight of current moving player is equal to 1 and can move slide from RookRight of current moving player in the west direction through empty, slide from King of current moving player in the east direction through empty and not King of the moving player is threatened then slide from RookRight of current moving player in the west direction through true.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins If the moving player cannot move or Counter is equal to 99, it's a draw.
                
        "))
        (useFor "Ruleset/Sfenj (Ludii 9) (Reconstructed)" (id "3821"))
        (useFor "Ruleset/Sfenj (Ludii 10) (Reconstructed)" (rules "The game Sfenj is played by two players on a 8x8 rectangle board with square tiling. 
                All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights and Queens.
                Rules for Pieces:
                BishopnoCrosses slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one on sites: F4, G4, H4, B3, C3, D3, E3 and A2.
                Place a Pawn for player two on sites: H7, H6, G6, F6, E6, A5, B5 and C5.
                Place a Rook for player one on sites: C2 and D1.
                Place a Knight for player one on sites: B1 and H2.
                Place a BishopnoCross for player one on sites: E1 and F1.
                Place a Queen for player one on site D2.
                Place a KingnoCross for player one on site C1.
                Place a Rook for player two on sites: C7 and B8.
                Place a Knight for player two on sites: A7 and H8.
                Place a BishopnoCross for player two on sites: F7 and G7.
                Place a Queen for player two on site B7.
                Place a KingnoCross for player two on site C8..
                Rules: 
                Move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Sfenj (Ludii 10) (Reconstructed)" (id "3822"))
        (useFor "Ruleset/Sfenj (Ludii 11) (Reconstructed)" (rules "The game Sfenj is played by two players on a 8x8 rectangle board with square tiling.
                Regions:
                Promotion: the top sites of the board for P1
                Promotion: the bottom sites of the board for P2 
                All players play with Pawns, Rooks, Kings, Bishops, Knights and Queens.
                Rules for Pieces:
                Bishops slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells.
                Kings if there is an enemy Player at to, remember the value Piece at to and remove pieces at to then step adjacent then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Knights leap a piece to not is a friend.
                Pawns if the to location of the last move is not equal to the location of the piece, if [Queen of the moving player] is in all remembered values, [Knight of the moving player] is in all remembered values, [Rook of the moving player] is in all remembered values or [Bishop of the moving player] is in all remembered values and the location of the piece is in Promotion or Promotion, if [Queen of the moving player] is in all remembered values, a piece of the moving player the location of the piece, this piece can promote into Queen or if [Knight of the moving player] is in all remembered values, a piece of the moving player the location of the piece, this piece can promote into Knight or if [Rook of the moving player] is in all remembered values, a piece of the moving player the location of the piece, this piece can promote into Rook or if [Bishop of the moving player] is in all remembered values, a piece of the moving player the location of the piece, this piece can promote into Bishop set pending or if the location of the piece is in start position, slide from the location of the piece in the forward direction through empty or step forward or remember the value Piece at to and remove pieces at to then step forward-right or forward-left if the to location of the last move is in Promotion or Promotion and [Queen of the moving player] is in all remembered values, [Knight of the moving player] is in all remembered values, [Rook of the moving player] is in all remembered values or [Bishop of the moving player] is in all remembered values, move again and if not in the same turn and the number of turns is less than or equal to 2, set pending and move again.
                Queens slide from the location of the piece in the adjacent direction through [between] is in the set of empty cells.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells then if State at the to location of the last move is equal to 1, set the state of the Cell the to location of the last move to 0.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 1 row.
                Place a Pawn for player two at each cell of the 6 row.
                Place a Rook for player one on sites: A1 and H1.
                Place a Knight for player one on sites: B1 and G1.
                Place a Bishop for player one on sites: C1 and F1.
                Place a Queen for player one on site D1.
                Place a King for player one on site E1.
                Place a Rook for player two on sites: A8 and H8.
                Place a Knight for player two on sites: B8 and G8.
                Place a Bishop for player two on sites: C8 and F8.
                Place a Queen for player two on site D8.
                Place a King for player two on site E8..
                Rules: 
                If not a state is pending and in the same turn, if [Queen of the moving player] is in all remembered values, a piece of the moving player the to location of the last move, this piece can promote into Queen or if [Knight of the moving player] is in all remembered values, a piece of the moving player the to location of the last move, this piece can promote into Knight or if [Rook of the moving player] is in all remembered values, a piece of the moving player the to location of the last move, this piece can promote into Rook or if [Bishop of the moving player] is in all remembered values, a piece of the moving player the to location of the last move, this piece can promote into Bishop, else if a state is pending, pass or move one of your pieces, else move one of your pieces or if State at King of current moving player is equal to 1 and not King of the moving player is threatened, if State at RookLeft of current moving player is equal to 1 and can move slide from RookLeft of current moving player in the east direction through empty, slide from King of current moving player in the west direction through empty and not King of the moving player is threatened then slide from RookLeft of current moving player in the east direction through true or if State at RookRight of current moving player is equal to 1 and can move slide from RookRight of current moving player in the west direction through empty, slide from King of current moving player in the east direction through empty and not King of the moving player is threatened then slide from RookRight of current moving player in the west direction through true.
                Aim: 
                If King of the next player is threatened and not can move move one of your pieces, the moving player wins.
                
        "))
        (useFor "Ruleset/Sfenj (Ludii 11) (Reconstructed)" (id "3823"))
        (source "Murray 1913: 373-374.")
        (version "1.3.11")
        (classification "board/war/replacement/checkmate/chaturanga/reconstruction/done")
        (credit "Eric Piette")
        (origin "This game was played in Siberia, around 1895.")
        }
    )
    
    (graphics {
        (board Style Chess)
    })
    
    (recon {
        (concept "NumComponentsTypePerPlayer" minValue:4 maxValue:20)
    })
    
)

