(define "RemoveEnemyPiece" 
    (move
        Remove
        (sites Occupied by:Next container:"Board") 
    )
)

(define "IfLine3MoveAgain" 
    (then 
        (if 
            (is Line 3 Orthogonal exact:True) 
            (moveAgain)
        )
    )
)

//------------------------------------------------------------------------------

(game "Alquerque de Nueve"
    (players 2)
    
    (equipment { 
        (board (concentric Square rings:3) use:Vertex) 
        (hand Each)
        (dice d:6 num:3)
        (piece "Marker" Each) 
    })  
    (rules 
        (start (place "Marker" "Hand" count:9))
        (play 
            (if "SameTurn"
                "RemoveEnemyPiece"
                (do (roll)
                    next:(if [#] ("IfLine3MoveAgain"))
                )
            )
        )
        (end [#])
    )
)

//------------------------------------------------------------------------------

(metadata 
    
    (info
        {
        (description "Alquerque de Nueve is an alignment game that was played with dice, but which was incompletey described. It appears in the Libro de los Juegos of Alfonso X, where it is described briefly.")
        (rules "Three concentric squares, with lines connecting the midpoints of the sides. Nine pieces per player. Three six-sided dice. Players place pieces on the board according to the throws of the dice. When a player places three pieces in a row, they capture one of the other player's pieces. ")
        (source "Libro de los Juegos 92.")
        (id "969")
        (version "1.3.2")
        (classification "board/space/line/reconstruction")
        (credit "Eric Piette")
        (origin  "This game was played in Spain, around 1283.")
        }
    )
    
)
