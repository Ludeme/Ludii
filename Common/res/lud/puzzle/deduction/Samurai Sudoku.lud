(game "Samurai Sudoku"
    (players 1)
    (equipment {
        (board
            (merge {
                (square 9)
                (shift 12 0 (square 9))
                (shift 0 12 (square 9))
                (shift 12 12 (square 9))
                (shift 6 6 (square 9))
            })
            (values Cell (range 1 9))
        )
        // Bottom left 9x9 square.
        (regions {0..8})
        (regions {9..17})
        (regions {18..26})
        (regions {27..35})
        (regions {36..44})
        (regions {45..53})
        (regions {54..62})
        (regions {64..72})
        (regions {74..82})
        (regions {0 9 18 27 36 45 54 64 74})
        (regions {1 10 19 28 37 46 55 65 75})
        (regions {2 11 20 29 38 47 56 66 76})
        (regions {3 12 21 30 39 48 57 67 77})
        (regions {4 13 22 31 40 49 58 68 78})
        (regions {5 14 23 32 41 50 59 69 79})
        (regions {6 15 24 33 42 51 60 70 80})
        (regions {7 16 25 34 43 52 61 71 81})
        (regions {8 17 26 35 44 53 62 72 82})
        (regions {0..2 9..11 18..20})
        (regions {3..5 12..14 21..23})
        (regions {6..8 15..17 24..26})
        (regions {27..29 36..38 45..47})
        (regions {30..32 39..41 48..50})
        (regions {33..35 42..44 51..53})
        (regions {54..56 64..66 74..76})
        (regions {57..59 67..69 77..79})
        (regions {60..62 70..72 80..82})

        // Bottom right 9x9 square.
        (regions {88..96})
        (regions {97..105})
        (regions {106..114})
        (regions {115..123})
        (regions {124..132})
        (regions {133..141})
        (regions {142 144..151})
        (regions {152 154..161})
        (regions {162 164..171})
        (regions {88 97 106 115 124 133 142 152 162})
        (regions {89 98 107 116 125 134 144 154 164})
        (regions {90 99 108 117 126 135 145 155 165})
        (regions {91 100 109 118 127 136 146 156 166})
        (regions {92 101 110 119 128 137 147 157 167})
        (regions {93 102 111 120 129 138 148 158 168})
        (regions {94 103 112 121 130 139 149 159 169})
        (regions {95 104 113 122 131 140 150 160 170})
        (regions {96 105 114 123 132 141 151 161 171})
        (regions {88..90 97..99 106..108})
        (regions {91..93 100..102 109..111})
        (regions {94..96 103..105 112..114})
        (regions {115..117 124..126 133..135})
        (regions {118..120 127..129 136..138})
        (regions {121..123 130..132 139..141})
        (regions {142 144 145 152 154 155 162 164 165})
        (regions {146..148 156..158 166..168})
        (regions {149..151 159..161 169..171})

        // Middle square.
        (regions {60 61 62 63 352 143 142 144 145})
        (regions {70 71 72 73 353 153 152 154 155})
        (regions {80 81 82 83 354 163 162 164 165})
        (regions {84 85 86 87 355 173 172 174 175})
        (regions {356..364})
        (regions {182 184 186 188 365 267 264 268 270})
        (regions {183 185 187 189 366 266 265 269 271})
        (regions {196 197 198 199 367 279 278 280 281})
        (regions {206 207 208 209 368 289 288 290 291})
        (regions {60 70 80 84 356 182 183 196 206})
        (regions {61 71 81 85 357 184 185 197 207})
        (regions {62 72 82 86 358 186 187 198 208})
        (regions {63 73 83 87 359 188 189 199 209})
        (regions {352 353 354 355 360 365 366 367 368})
        (regions {143 153 163 173 361 267 266 279 289})
        (regions {142 152 162 172 362 264 265 278 288})
        (regions {144 154 164 174 363 268 269 280 290})
        (regions {145 155 165 175 364 270 271 281 291})
        (regions {63 352 143 73 353 153 83 354 163})
        (regions {84 85 86 356 357 358 182 184 186})
        (regions {87 355 173 359 360 361 188 365 267})
        (regions {172 174 175 362 363 364 264 268 270})
        (regions {189 366 266 199 367 279 209 368 289})

        // Top left 9x9 square.
        (regions {176..181 183 185 187})
        (regions {190..198})
        (regions {200..208})
        (regions {210..218})
        (regions {219..227})
        (regions {228..236})
        (regions {237..245})
        (regions {246..254})
        (regions {255..263})
        (regions {176 190 200 210 219 228 237 246 255})
        (regions {177 191 201 211 220 229 238 247 256})
        (regions {178 192 202 212 221 230 239 248 257})
        (regions {179 193 203 213 222 231 240 249 258})
        (regions {180 194 204 214 223 232 241 250 259})
        (regions {181 195 205 215 224 233 242 251 260})
        (regions {183 196 206 216 225 234 243 252 261})
        (regions {185 197 207 217 226 235 244 253 262})
        (regions {187 198 208 218 227 236 245 254 263})
        (regions {176..178 190..192 200..202})
        (regions {179..181 193..195 203..205})
        (regions {183 185 187 196..198 206..208})
        (regions {210..212 219..221 228..230})
        (regions {213..215 222..224 231..233})
        (regions {216..218 225..227 234..236})
        (regions {237..239 246..248 255..257})
        (regions {240..242 249..251 258..260})
        (regions {243..245 252..254 261..263})

        // Top Right 9x9 square.
        (regions {265 269 271..277})
        (regions {278 280..287})
        (regions {288 290..297})
        (regions {298..306})
        (regions {307..315})
        (regions {316..324})
        (regions {325..333})
        (regions {334..342})
        (regions {343..351})
        (regions {265 278 288 298 307 316 325 334 343})
        (regions {269 280 290 299 308 317 326 335 344})
        (regions {271 281 291 300 309 318 327 336 345})
        (regions {272 282 292 301 310 319 328 337 346})
        (regions {273 283 293 302 311 320 329 338 347})
        (regions {274 284 294 303 312 321 330 339 348})
        (regions {275 285 295 304 313 322 331 340 349})
        (regions {276 286 296 305 314 323 332 341 350})
        (regions {277 287 297 306 315 324 333 342 351})
        (regions {265 269 271 278 280 281 288 290 291})
        (regions {272..274 282..284 292..294})
        (regions {275..277 285..287 295..297})
        (regions {298..300 307..309 316..318})
        (regions {301..303 310..312 319..321})
        (regions {304..306 313..315 322..324})
        (regions {325..327 334..336 343..345})
        (regions {346..348 337..339 328..330})
        (regions {331..333 340..342 349..351})
    })
    (rules
        (start <Challenge>)
        (play (satisfy (all Different)))
        (end (if (is Solved) (result P1 Win)))
    )
)

//------------------------------------------------------------------------------

(option "Challenge" <Challenge> args:{ <start> }
    {
    (item "1"
        <(set {
            {0 8} {4 6} {8 9} {88 5} {92 7} {96 3} {10 1}
            {13 5} {16 2} {98 7} {101 4} {104 2} {21 8}
            {23 7} {109 6} {111 1} {29 5} {33 2} {117 3}
            {121 5} {36 4} {37 8} {40 3} {43 6} {44 5}
            {124 2} {125 6} {128 9} {131 7} {132 4}
            {47 9} {51 8} {135 8} {139 1} {57 1} {59 5}
            {352 5} {146 2} {148 9} {65 3} {68 8} {353 2}
            {157 5} {160 4} {74 7} {78 4} {83 4} {163 3}
            {167 1} {171 6} {86 5} {172 9} {356 7} {357 4}
            {360 9} {363 2} {364 8} {186 6} {264 7} {176 6}
            {180 9} {189 8} {266 2} {273 3} {277 6} {191 1}
            {194 4} {367 1} {283 6} {286 2} {203 2} {205 8}
            {368 4} {292 1} {294 5} {212 9} {216 5} {300 1}
            {304 7} {219 7} {220 8} {223 3} {226 9} {227 1}
            {307 7} {308 3} {311 9} {314 1} {315 2} {230 4}
            {234 8} {318 9} {322 8} {240 3} {242 4} {328 7}
            {330 4} {247 4} {250 5} {253 1} {335 5} {338 8}
            {341 4} {255 3} {259 8} {263 4} {343 6} {347 1}
            {351 8}
        })>
        ""
    )
})

//------------------------------------------------------------------------------

(metadata
    (info
        {
        (description "Samurai Sudoku is one of the sudoku variation with overlapping sudoku grids.")
        (rules "The puzzle consists of five grids, one in the center and the other 4 overlapping each corner grid of the central one. This means that the numbers must be different  for all the five puzzle squares like as 5 different Sudoku.")
        (source "<a href=\"http://www.cross-plus-a.com/sudoku.htm\" target=\"_blank\" class=\"style1\" style=\"color: #0000EE\" />cross-plus-a.com</a>")
        (version "1.3.0")
        (classification "puzzle/deduction")
        (credit "Eric Piette")
        }
    )

    (graphics {
        (show Line {
            {3 93} {0 90} {6 296} {9 299} {200 290} {203 293} {100 390}
            {103 393} {106 196} {306 396} {109 199} {309 399}
            {0 9} {100 109} {30 39} {130 139} {60 169} {90 199} {200 309}
            {230 339} {260 269} {360 369} {290 299} {390 399}
            }
            (colour Black) scale:2
        )
    })
)
