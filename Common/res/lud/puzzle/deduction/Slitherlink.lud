(game "Slitherlink"
    (players 1)
    (equipment
        {
        (board (rectangle <Challenge:size>) (values Edge (range 0 1)) use:Edge)
        (hints { <Challenge:hints> } Cell)
        }
    )
    (rules
        (play
            (satisfy {
                (forAll Cell
                    (or
                        (= (hint Cell at:(from)) Off)
                        (is Count Edge (sites Incident Edge of:Cell at:(from)) (hint Cell at:(from)))
                    )
                )
                (forAll Vertex
                    (or
                        (is Count Edge (sites Incident Edge of:Vertex at:(from)) 0)
                        (is Count Edge (sites Incident Edge of:Vertex at:(from)) 2)
                    )
                )
                (< (count Groups Edge) 2)
            })
        )
        (end (if (is Solved) (result P1 Win)))
    )
)

//------------------------------------------------------------------------------

(option "Challenge" <Challenge> args:{ <size> <hints> }
    {
    (item "test"
        <5 5>
        <
        (hint {1} 2)
        (hint {2} 3)
        (hint {4} 1)
        (hint {6} 2)
        (hint {7} 1)
        (hint {12} 1)
        (hint {15} 0)
        >
        ""
    )

    (item "Janko.at"
        <7 7>
        <
        (hint {1} 2)
        (hint {2} 2)
        (hint {3} 2)
        (hint {5} 2)
        (hint {6} 2)
        (hint {10} 2)
        (hint {11} 2)
        (hint {13} 2)
        (hint {14} 2)
        (hint {15} 2)
        (hint {19} 2)
        (hint {20} 2)
        (hint {21} 2)
        (hint {23} 2)
        (hint {24} 3)
        (hint {26} 2)
        (hint {27} 2)
        (hint {31} 2)
        >
        ""
    )

    (item "Nikoli Example"
        <8 8>
        <
        (hint {0} 3)
        (hint {2} 3)
        (hint {4} 0)
        (hint {5} 2)
        (hint {14} 3)
        (hint {15} 1)
        (hint {17} 2)
        (hint {21} 3)
        (hint {22} 0)
        (hint {26} 3)
        (hint {27} 0)
        (hint {31} 3)
        (hint {33} 3)
        (hint {34} 1)
        (hint {43} 0)
        (hint {44} 2)
        (hint {46} 1)
        (hint {48} 3)
        >
        ""
    )*

    (item "Janko.at Extreme"
        <31 46>
        <
        (hint {3} 1)
        (hint {6} 1)
        (hint {8} 1)
        (hint {12} 2)
        (hint {13} 2)
        (hint {15} 1)
        (hint {16} 3)
        (hint {17} 1)
        (hint {20} 1)
        (hint {23} 1)
        (hint {24} 1)
        (hint {27} 3)
        (hint {29} 3)
        (hint {30} 1)
        (hint {31} 1)
        (hint {34} 3)
        (hint {36} 2)
        (hint {37} 1)
        (hint {39} 2)
        (hint {40} 3)
        (hint {42} 2)
        (hint {43} 1)

        (hint {45} 2)
        (hint {46} 2)
        (hint {48} 1)
        (hint {50} 3)
        (hint {52} 3)
        (hint {55} 1)
        (hint {57} 2)
        (hint {59} 1)
        (hint {64} 2)
        (hint {66} 3)
        (hint {68} 2)
        (hint {69} 1)
        (hint {71} 1)
        (hint {74} 3)
        (hint {77} 1)
        (hint {78} 2)
        (hint {84} 1)
        (hint {88} 2)

        (hint {90} 2)
        (hint {93} 0)
        (hint {94} 1)
        (hint {96} 2)
        (hint {97} 0)
        (hint {98} 2)
        (hint {102} 3)
        (hint {103} 2)
        (hint {104} 3)
        (hint {105} 2)
        (hint {108} 2)
        (hint {109} 1)
        (hint {111} 3)
        (hint {114} 3)
        (hint {116} 3)
        (hint {121} 1)
        (hint {124} 0)
        (hint {125} 1)
        (hint {127} 2)
        (hint {129} 3)
        (hint {132} 3)
        (hint {133} 2)

        (hint {135} 1)
        (hint {137} 3)
        (hint {140} 2)
        (hint {142} 1)
        (hint {145} 1)
        (hint {146} 0)
        (hint {148} 1)
        (hint {152} 3)
        (hint {154} 2)
        (hint {158} 1)
        (hint {159} 1)
        (hint {165} 2)
        (hint {166} 3)
        (hint {167} 2)
        (hint {169} 1)
        (hint {171} 3)
        (hint {174} 1)
        (hint {175} 1)
        (hint {176} 3)

        (hint {180} 1)
        (hint {187} 3)
        (hint {188} 3)
        (hint {194} 2)
        (hint {195} 0)
        (hint {197} 3)
        (hint {199} 1)
        (hint {200} 1)
        (hint {201} 1)
        (hint {202} 1)
        (hint {203} 3)
        (hint {206} 2)
        (hint {207} 1)
        (hint {210} 1)
        (hint {212} 2)
        (hint {213} 3)
        (hint {215} 1)
        (hint {217} 1)
        (hint {218} 2)
        (hint {221} 2)
        (hint {222} 1)
        (hint {223} 2)
        (hint {224} 2)

        (hint {225} 1)
        (hint {229} 1)
        (hint {235} 2)
        (hint {236} 1)
        (hint {237} 1)
        (hint {242} 1)
        (hint {246} 3)
        (hint {249} 3)
        (hint {251} 3)
        (hint {253} 1)
        (hint {256} 1)
        (hint {262} 3)
        (hint {266} 2)
        (hint {267} 3)
        (hint {269} 2)

        (hint {271} 2)
        (hint {275} 2)
        (hint {276} 2)
        (hint {278} 1)
        (hint {279} 0)
        (hint {280} 2)
        (hint {283} 3)
        (hint {284} 1)
        (hint {287} 1)
        (hint {289} 2)
        (hint {290} 2)
        (hint {291} 1)
        (hint {297} 3)
        (hint {299} 1)
        (hint {300} 1)
        (hint {302} 3)
        (hint {304} 0)
        (hint {306} 2)
        (hint {308} 1)
        (hint {309} 3)
        (hint {310} 2)
        (hint {313} 1)

        (hint {315} 3)
        (hint {318} 2)
        (hint {319} 1)
        (hint {322} 1)
        (hint {325} 1)
        (hint {330} 0)
        (hint {331} 1)
        (hint {334} 2)
        (hint {336} 2)
        (hint {339} 1)
        (hint {341} 1)
        (hint {344} 1)
        (hint {345} 1)
        (hint {349} 1)
        (hint {351} 3)
        (hint {353} 2)
        (hint {354} 3)
        (hint {359} 3)

        (hint {361} 3)
        (hint {363} 1)
        (hint {364} 0)
        (hint {366} 1)
        (hint {370} 2)
        (hint {371} 1)
        (hint {374} 2)
        (hint {377} 1)
        (hint {379} 1)
        (hint {381} 1)
        (hint {382} 1)
        (hint {383} 2)
        (hint {384} 3)
        (hint {385} 3)
        (hint {387} 1)
        (hint {388} 2)
        (hint {391} 2)
        (hint {393} 2)
        (hint {395} 0)
        (hint {397} 1)
        (hint {400} 1)
        (hint {401} 3)
        (hint {403} 2)

        (hint {408} 1)
        (hint {410} 2)
        (hint {411} 0)
        (hint {413} 2)
        (hint {416} 2)
        (hint {418} 0)
        (hint {419} 1)
        (hint {422} 2)
        (hint {423} 3)
        (hint {425} 2)
        (hint {427} 1)
        (hint {429} 1)
        (hint {434} 0)
        (hint {435} 1)
        (hint {436} 2)
        (hint {439} 2)
        (hint {441} 3)
        (hint {442} 2)
        (hint {445} 3)
        (hint {447} 1)
        (hint {448} 1)
        (hint {449} 2)

        (hint {450} 1)
        (hint {454} 1)
        (hint {458} 0)
        (hint {461} 1)
        (hint {463} 2)
        (hint {464} 2)
        (hint {465} 3)
        (hint {467} 2)
        (hint {468} 0)
        (hint {469} 1)
        (hint {470} 1)
        (hint {471} 2)
        (hint {472} 3)
        (hint {476} 1)
        (hint {478} 2)
        (hint {479} 3)
        (hint {481} 3)
        (hint {484} 2)
        (hint {485} 1)
        (hint {487} 1)
        (hint {489} 0)
        (hint {491} 1)

        (hint {496} 2)
        (hint {499} 1)
        (hint {501} 1)
        (hint {503} 1)
        (hint {504} 3)
        (hint {506} 2)
        (hint {507} 2)
        (hint {510} 2)
        (hint {514} 1)
        (hint {520} 1)
        (hint {522} 3)
        (hint {524} 1)
        (hint {525} 1)
        (hint {528} 1)
        (hint {533} 3)
        (hint {535} 3)
        (hint {536} 2)
        (hint {538} 2)
        (hint {539} 1)

        (hint {540} 3)
        (hint {541} 2)
        (hint {544} 1)
        (hint {548} 2)
        (hint {549} 2)
        (hint {553} 2)
        (hint {554} 1)
        (hint {555} 1)
        (hint {556} 0)
        (hint {560} 1)
        (hint {563} 1)
        (hint {564} 2)
        (hint {565} 3)
        (hint {571} 2)
        (hint {573} 3)
        (hint {575} 1)
        (hint {577} 2)
        (hint {579} 2)
        (hint {583} 3)

        (hint {586} 2)
        (hint {589} 3)
        (hint {590} 3)
        (hint {591} 3)
        (hint {592} 2)
        (hint {594} 2)
        (hint {595} 2)
        (hint {599} 3)
        (hint {600} 3)
        (hint {602} 3)
        (hint {603} 1)
        (hint {604} 2)
        (hint {607} 2)
        (hint {608} 2)
        (hint {613} 1)
        (hint {616} 2)
        (hint {618} 2)
        (hint {621} 1)
        (hint {623} 3)
        (hint {625} 2)
        (hint {626} 3)
        (hint {629} 3)

        (hint {632} 2)
        (hint {639} 3)
        (hint {642} 2)
        (hint {644} 1)
        (hint {648} 2)
        (hint {649} 3)
        (hint {650} 3)
        (hint {654} 2)
        (hint {656} 3)
        (hint {658} 0)
        (hint {659} 3)
        (hint {660} 1)
        (hint {661} 1)
        (hint {662} 2)
        (hint {665} 0)
        (hint {667} 1)
        (hint {671} 2)
        (hint {673} 2)
        (hint {674} 3)

        (hint {678} 0)
        (hint {680} 2)
        (hint {683} 2)
        (hint {684} 2)
        (hint {686} 2)
        (hint {687} 3)
        (hint {691} 1)
        (hint {694} 2)
        (hint {697} 1)
        (hint {698} 1)
        (hint {702} 3)
        (hint {706} 1)
        (hint {707} 3)
        (hint {710} 1)
        (hint {712} 2)
        (hint {714} 2)
        (hint {715} 3)
        (hint {716} 2)
        (hint {717} 2)

        (hint {720} 2)
        (hint {721} 1)
        (hint {722} 3)
        (hint {725} 3)
        (hint {726} 1)
        (hint {729} 3)
        (hint {731} 1)
        (hint {733} 2)
        (hint {735} 2)
        (hint {736} 1)
        (hint {738} 1)
        (hint {742} 0)
        (hint {744} 2)
        (hint {748} 0)
        (hint {753} 1)
        (hint {754} 1)
        (hint {756} 1)
        (hint {757} 1)
        (hint {759} 1)
        (hint {763} 2)
        (hint {764} 2)

        (hint {767} 1)
        (hint {769} 3)
        (hint {772} 3)
        (hint {773} 1)
        (hint {774} 1)
        (hint {778} 0)
        (hint {779} 1)
        (hint {780} 1)
        (hint {782} 2)
        (hint {784} 2)
        (hint {785} 0)
        (hint {786} 1)
        (hint {788} 3)
        (hint {790} 1)
        (hint {791} 1)
        (hint {793} 2)
        (hint {799} 1)
        (hint {802} 1)
        (hint {805} 2)
        (hint {806} 3)
        (hint {809} 3)

        (hint {810} 1)
        (hint {812} 2)
        (hint {813} 0)
        (hint {816} 1)
        (hint {818} 2)
        (hint {821} 3)
        (hint {829} 2)
        (hint {830} 3)
        (hint {836} 1)
        (hint {838} 2)
        (hint {839} 0)
        (hint {840} 1)
        (hint {841} 2)
        (hint {842} 1)
        (hint {843} 3)
        (hint {844} 2)
        (hint {846} 1)
        (hint {848} 1)
        (hint {852} 1)
        (hint {853} 1)
        (hint {854} 2)

        (hint {861} 2)
        (hint {863} 2)
        (hint {865} 1)
        (hint {866} 1)
        (hint {867} 2)
        (hint {868} 1)
        (hint {870} 2)
        (hint {871} 2)
        (hint {873} 1)
        (hint {874} 1)
        (hint {876} 1)
        (hint {877} 1)
        (hint {878} 1)
        (hint {879} 0)
        (hint {881} 2)
        (hint {884} 2)
        (hint {893} 1)
        (hint {894} 3)
        (hint {895} 0)
        (hint {897} 3)

        (hint {902} 2)
        (hint {903} 1)
        (hint {904} 1)
        (hint {907} 1)
        (hint {908} 2)
        (hint {911} 2)
        (hint {915} 1)
        (hint {919} 3)
        (hint {926} 2)
        (hint {928} 3)
        (hint {930} 1)
        (hint {932} 2)
        (hint {933} 3)
        (hint {935} 2)
        (hint {936} 2)
        (hint {937} 2)
        (hint {938} 0)
        (hint {941} 1)
        (hint {942} 2)

        (hint {945} 1)
        (hint {946} 2)
        (hint {949} 1)
        (hint {953} 3)
        (hint {956} 1)
        (hint {957} 2)
        (hint {959} 1)
        (hint {962} 1)
        (hint {966} 1)
        (hint {967} 1)
        (hint {969} 3)
        (hint {971} 1)
        (hint {976} 1)
        (hint {977} 0)
        (hint {980} 1)
        (hint {984} 1)
        (hint {985} 2)
        (hint {988} 3)
        (hint {989} 1)

        (hint {990} 2)
        (hint {992} 1)
        (hint {995} 1)
        (hint {996} 1)
        (hint {998} 2)
        (hint {999} 1)
        (hint {1001} 1)
        (hint {1002} 1)
        (hint {1003} 1)
        (hint {1005} 1)
        (hint {1009} 1)
        (hint {1012} 3)
        (hint {1016} 0)
        (hint {1018} 2)
        (hint {1021} 2)
        (hint {1022} 2)
        (hint {1024} 1)
        (hint {1026} 1)
        (hint {1031} 1)
        (hint {1032} 1)

        (hint {1037} 3)
        (hint {1039} 2)
        (hint {1041} 1)
        (hint {1044} 0)
        (hint {1046} 3)
        (hint {1049} 2)
        (hint {1050} 2)
        (hint {1053} 2)
        (hint {1055} 3)
        (hint {1056} 2)
        (hint {1057} 0)
        (hint {1058} 1)
        (hint {1059} 2)
        (hint {1061} 1)
        (hint {1064} 2)
        (hint {1068} 2)
        (hint {1070} 3)
        (hint {1073} 3)
        (hint {1074} 2)
        (hint {1078} 3)

        (hint {1081} 2)
        (hint {1083} 2)
        (hint {1084} 0)
        (hint {1085} 2)
        (hint {1088} 1)
        (hint {1091} 2)
        (hint {1095} 2)
        (hint {1098} 0)
        (hint {1104} 1)
        (hint {1105} 1)
        (hint {1109} 2)
        (hint {1111} 1)
        (hint {1112} 1)
        (hint {1114} 0)
        (hint {1118} 3)
        (hint {1119} 2)
        (hint {1122} 0)

        (hint {1127} 1)
        (hint {1129} 1)
        (hint {1131} 3)
        (hint {1134} 1)
        (hint {1136} 3)
        (hint {1137} 3)
        (hint {1138} 1)
        (hint {1139} 1)
        (hint {1140} 2)
        (hint {1141} 1)
        (hint {1142} 1)
        (hint {1143} 2)
        (hint {1144} 3)
        (hint {1146} 2)
        (hint {1147} 1)
        (hint {1150} 2)
        (hint {1151} 3)
        (hint {1152} 1)
        (hint {1158} 1)
        (hint {1165} 2)
        (hint {1169} 2)

        (hint {1171} 2)
        (hint {1177} 2)
        (hint {1179} 3)
        (hint {1182} 1)
        (hint {1185} 3)
        (hint {1188} 3)
        (hint {1189} 0)
        (hint {1192} 0)
        (hint {1193} 1)
        (hint {1194} 2)
        (hint {1195} 1)
        (hint {1197} 1)
        (hint {1199} 1)
        (hint {1200} 2)
        (hint {1201} 2)
        (hint {1204} 2)
        (hint {1205} 1)
        (hint {1206} 1)
        (hint {1208} 1)
        (hint {1211} 1)
        (hint {1212} 0)
        (hint {1214} 3)

        (hint {1215} 3)
        (hint {1216} 2)
        (hint {1217} 2)
        (hint {1218} 0)
        (hint {1219} 3)
        (hint {1220} 1)
        (hint {1222} 1)
        (hint {1223} 0)
        (hint {1224} 2)
        (hint {1228} 3)
        (hint {1234} 1)
        (hint {1237} 3)
        (hint {1240} 2)
        (hint {1243} 3)
        (hint {1246} 2)
        (hint {1250} 1)
        (hint {1251} 3)
        (hint {1252} 3)
        (hint {1254} 3)
        (hint {1256} 2)
        (hint {1257} 2)
        (hint {1258} 3)

        (hint {1262} 2)
        (hint {1268} 2)
        (hint {1269} 3)
        (hint {1270} 1)
        (hint {1271} 2)
        (hint {1273} 0)
        (hint {1274} 2)
        (hint {1277} 2)
        (hint {1281} 1)
        (hint {1284} 2)
        (hint {1286} 2)
        (hint {1287} 3)
        (hint {1289} 2)
        (hint {1291} 2)
        (hint {1292} 3)
        (hint {1293} 0)
        (hint {1295} 1)
        (hint {1300} 1)
        (hint {1303} 3)

        (hint {1306} 2)
        (hint {1307} 3)
        (hint {1309} 3)
        (hint {1311} 0)
        (hint {1313} 1)
        (hint {1315} 3)
        (hint {1316} 3)
        (hint {1320} 1)
        (hint {1321} 2)
        (hint {1322} 3)
        (hint {1324} 2)
        (hint {1326} 2)
        (hint {1329} 2)
        (hint {1330} 3)
        (hint {1332} 2)
        (hint {1335} 1)
        (hint {1337} 2)
        (hint {1340} 2)
        (hint {1341} 3)
        (hint {1343} 2)
        (hint {1345} 0)
        (hint {1348} 2)
        >
        ""
    )
})

//------------------------------------------------------------------------------

(metadata
    (info
        {
        (description "Slitherlink is a pen and paper puzzle that is played on a rectangular grid of dots.")
        (aliases {"Fences" "Takegaki" "Loop the Loop" "Loopy" "Ourobouros" "Suriza" "Dotty Dilemma"})
        (rules "Some of the squares created by the dots have numbers. The goal is to connect dots vertically or horizontally so that they form a continuous loop. The numbers indicate the number of sides in that box which are parts of the loop.")
        (source "<a href=\"https://en.wikipedia.org/wiki/Slitherlink\" target=\"_blank\" class=\"style1\" style=\"color: #0000EE\" />Wikipedia</a>")
        (version "1.3.0")
        (classification "puzzle/deduction")
        (publisher "Nikoli")
        (credit "Eric Piette")
        }
    )
    (graphics {
        (board Style PenAndPaper replaceComponentsWithFilledCells:True)
        (player Colour P1 (colour Black))

    })
)
