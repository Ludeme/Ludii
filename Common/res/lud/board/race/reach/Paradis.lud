(define "ThrowValue" (mapEntry "Throw" (count Pips)))
(define "SiteToMoveOnTrack" (trackSite Move steps:#1))

//------------------------------------------------------------------------------

(game "Paradis"
    (players <Player:num>)
    (equipment {
        (board
            (concentric {<Player:num> <Player:num> <Player:num> <Player:num> <Player:num> <Player:num> <Player:num> <Player:num> <Player:num> <Player:num>})
            <Player:tracks>
            use:Vertex
        )
        (dice d:2 from:0 num:2)
        (piece "Marker" Each
            (move
                (from (from))
                (to ("SiteToMoveOnTrack" ("ThrowValue"))
                    (apply
                        (if (or
                                (and (= 1 ("ThrowValue")) (= (mapEntry "Center" Mover) (to)))
                                (and (= 2 ("ThrowValue")) (or (= (mapEntry "Center" Mover) (to)) (= (mapEntry "Center" Mover) ("SiteToMoveOnTrack" 1))))
                            )
                            (addScore Mover 1)
                        )
                    )
                )
            )
        )
        (map "Throw" {(pair 0 2) (pair 1 0) (pair 2 1)})
        <Player:center>
    })
    (rules
        <Player:start>
        (play
            (do (roll)
                next:(if (!= ("ThrowValue") 0) (forEach Piece))
            )
        )
        (end (if (= (score Mover) 3) (result Mover Win)))
    )
)

//------------------------------------------------------------------------------

(option "Players" <Player> args:{ <num> <start> <center> <tracks> }
    {
    (item "2" <2>
        <
        (start {
            (place "Marker1" 18)
            (place "Marker2" 19)
        })
        >
        <(map "Center" {(pair P1 0) (pair P2 1)})>
        <
        {
        (track "Track1" {18 16 14 12 10 8 6 4 2 0 2 4 6 8 10 12 14 16 18 16 14 12 10 8 6 4 2 0 2 4 6 8 10 12 14 16 18 16 14 12 10 8 6 4 2 0 2 4 6 8 10 12 14 16} P1 directed:True)
        (track "Track2" {19 17 15 13 11 9 7 5 3 1 3 5 7 9 11 13 15 17 19 17 15 13 11 9 7 5 3 1 3 5 7 9 11 13 15 17 19 17 15 13 11 9 7 5 3 1 3 5 7 9 11 13 15 17} P2 directed:True)
        }
        >
    "The game involves 2 players.")

    (item "4" <4>
        <
        (start {
            (place "Marker1" 36)
            (place "Marker2" 37)
            (place "Marker3" 38)
            (place "Marker4" 39)
        })
        >
        <(map "Center" {(pair P1 0) (pair P2 1) (pair P3 2) (pair P4 3) })>
        <
        {
        (track "Track1" {36 32 28 24 20 16 12 8 4 0 4 8 12 16 20 24 28 32 36 32 28 24 20 16 12 8 4 0 4 8 12 16 20 24 28 32 36 32 28 24 20 16 12 8 4 0 4 8 12 16 20 24 28 32} P1 directed:True)
        (track "Track2" {37 33 29 25 21 17 13 9 5 1 5 9 13 17 21 25 29 33 37 33 29 25 21 17 13 9 5 1 5 9 13 17 21 25 29 33 37 33 29 25 21 17 13 9 5 1 5 9 13 17 21 25 29 33} P2 directed:True)
        (track "Track3" {38 34 30 26 22 18 14 10 6 2 6 10 14 18 22 26 30 34 38 34 30 26 22 18 14 10 6 2 6 10 14 18 22 26 30 34 38 34 30 26 22 18 14 10 6 2 6 10 14 18 22 26 30 34} P3 directed:True)
        (track "Track4" {39 35 31 27 23 19 15 11 7 3 7 11 15 19 23 27 31 35 39 35 31 27 23 19 15 11 7 3 7 11 15 19 23 27 31 35 39 35 31 27 23 19 15 11 7 3 7 11 15 19 23 27 31 35} P4 directed:True)
        }
        >
    "The game involves 4 players.")

    (item "6" <6>
        <
        (start {
            (place "Marker1" 54)
            (place "Marker2" 55)
            (place "Marker3" 56)
            (place "Marker4" 57)
            (place "Marker5" 58)
            (place "Marker6" 59)
        })
        >
        <(map "Center" {(pair P1 0) (pair P2 1) (pair P3 2) (pair P4 3) (pair P5 4) (pair P6 5) })>
        <
        {
        (track "Track1" {54 48 42 36 30 24 18 12 6 0 6 12 18 24 30 36 42 48 54 48 42 36 30 24 18 12 6 0 6 12 18 24 30 36 42 48 54 48 42 36 30 24 18 12 6 0 6 12 18 24 30 36 42 48} P1 directed:True)
        (track "Track2" {55 49 43 37 31 25 19 13 7 1 7 13 19 25 31 37 43 49 55 49 43 37 31 25 19 13 7 1 7 13 19 25 31 37 43 49 55 49 43 37 31 25 19 13 7 1 7 13 19 25 31 37 43 49} P2 directed:True)
        (track "Track3" {56 50 44 38 32 26 20 14 8 2 8 14 20 26 32 38 44 50 56 50 44 38 32 26 20 14 8 2 8 14 20 26 32 38 44 50 56 50 44 38 32 26 20 14 8 2 8 14 20 26 32 38 44 50} P3 directed:True)
        (track "Track4" {57 51 45 39 33 27 21 15 9 3 9 15 21 27 33 39 45 51 57 51 45 39 33 27 21 15 9 3 9 15 21 27 33 39 45 51 57 51 45 39 33 27 21 15 9 3 9 15 21 27 33 39 45 51} P4 directed:True)
        (track "Track5" {58 52 46 40 34 28 22 16 10 4 10 16 22 28 3 40 46 52 58 52 46 40 34 28 22 16 10 4 10 16 22 28 3 40 46 52 58 52 46 40 34 28 22 16 10 4 10 16 22 28 3 40 46 52} P5 directed:True)
        (track "Track6" {59 53 47 41 35 29 23 17 11 5 11 17 23 29 35 41 47 53 59 53 47 41 35 29 23 17 11 5 11 17 23 29 35 41 47 53 59 53 47 41 35 29 23 17 11 5 11 17 23 29 35 41 47 53} P6 directed:True)
        }
        >
    "The game involves 6 players.")

    (item "8" <8>
        <
        (start {
            (place "Marker1" 72)
            (place "Marker2" 73)
            (place "Marker3" 74)
            (place "Marker4" 75)
            (place "Marker5" 76)
            (place "Marker6" 77)
            (place "Marker7" 78)
            (place "Marker8" 79)
        })
        >
        <(map "Center" {(pair P1 0) (pair P2 1) (pair P3 2) (pair P4 3) (pair P5 4) (pair P6 5) (pair P7 6) (pair P8 7)})>
        <
        {
        (track "Track1" {72 64 56 48 40 32 24 16 8 0 8 16 24 32 40 48 56 64 72 64 56 48 40 32 24 16 8 0 8 16 24 32 40 48 56 64 72 64 56 48 40 32 24 16 8 0 8 16 24 32 40 48 56 64} P1 directed:True)
        (track "Track2" {73 65 57 49 41 33 25 17 9 1 9 17 25 33 41 49 57 65 73 65 57 49 41 33 25 17 9 1 9 17 25 33 41 49 57 65 73 65 57 49 41 33 25 17 9 1 9 17 25 33 41 49 57 65} P2 directed:True)
        (track "Track3" {74 66 58 50 42 34 26 18 10 2 10 18 26 34 42 50 58 66 74 66 58 50 42 34 26 18 10 2 10 18 26 34 42 50 58 66 74 66 58 50 42 34 26 18 10 2 10 18 26 34 42 50 58 66} P3 directed:True)
        (track "Track4" {75 67 59 51 43 35 27 19 11 3 11 19 27 35 43 51 59 67 75 67 59 51 43 35 27 19 11 3 11 19 27 35 43 51 59 67 75 67 59 51 43 35 27 19 11 3 11 19 27 35 43 51 59 67} P4 directed:True)
        (track "Track5" {76 68 60 52 44 36 28 20 12 4 12 20 28 36 44 52 60 68 76 68 60 52 44 36 28 20 12 4 12 20 28 36 44 52 60 68 76 68 60 52 44 36 28 20 12 4 12 20 28 36 44 52 60 68} P5 directed:True)
        (track "Track6" {77 69 61 53 45 37 29 21 13 5 13 21 29 37 45 53 61 69 77 69 61 53 45 37 29 21 13 5 13 21 29 37 45 53 61 69 77 69 61 53 45 37 29 21 13 5 13 21 29 37 45 53 61 69} P6 directed:True)
        (track "Track7" {78 70 62 54 46 38 30 22 14 6 14 22 30 38 46 54 62 70 78 70 62 54 46 38 30 22 14 6 14 22 30 38 46 54 62 70 78 70 62 54 46 38 30 22 14 6 14 22 30 38 46 54 62 70} P7 directed:True)
        (track "Track8" {79 71 63 55 47 39 31 23 15 7 15 23 31 39 47 55 63 71 79 71 63 55 47 39 31 23 15 7 15 23 31 39 47 55 63 71 79 71 63 55 47 39 31 23 15 7 15 23 31 39 47 55 63 71} P8 directed:True)
        }
        >
    "The game involves 8 players.")*

    (item "10" <10>
        <
        (start {
            (place "Marker1" 90)
            (place "Marker2" 91)
            (place "Marker3" 92)
            (place "Marker4" 93)
            (place "Marker5" 94)
            (place "Marker6" 95)
            (place "Marker7" 96)
            (place "Marker8" 97)
            (place "Marker9" 98)
            (place "Marker10" 99)
        })
        >
        <(map "Center" {(pair P1 0) (pair P2 1) (pair P3 2) (pair P4 3) (pair P5 4) (pair P6 5) (pair P7 6) (pair P8 7) (pair P9 8) (pair P10 9)})>
        <
        {
        (track "Track1" {90 80 70 60 50 40 30 20 10 0 10 20 30 40 50 60 70 80 90 80 70 60 50 40 30 20 10 0 10 20 30 40 50 60 70 80 90 80 70 60 50 40 30 20 10 0 10 20 30 40 50 60 70 80} P1 directed:True)
        (track "Track2" {91 81 71 61 51 41 31 21 11 1 11 21 31 41 51 61 71 81 91 81 71 61 51 41 31 21 11 1 11 21 31 41 51 61 71 81 91 81 71 61 51 41 31 21 11 1 11 21 31 41 51 61 71 81} P2 directed:True)
        (track "Track3" {92 82 72 62 52 42 32 22 12 2 12 22 32 42 52 62 72 82 92 82 72 62 52 42 32 22 12 2 12 22 32 42 52 62 72 82 92 82 72 62 52 42 32 22 12 2 12 22 32 42 52 62 72 82} P3 directed:True)
        (track "Track4" {93 83 73 63 53 43 33 23 13 3 13 23 33 43 53 63 73 83 93 83 73 63 53 43 33 23 13 3 13 23 33 43 53 63 73 83 93 83 73 63 53 43 33 23 13 3 13 23 33 43 53 63 73 83} P4 directed:True)
        (track "Track5" {94 84 74 64 54 44 34 24 14 4 14 24 34 44 54 64 74 84 94 84 74 64 54 44 34 24 14 4 14 24 34 44 54 64 74 84 94 84 74 64 54 44 34 24 14 4 14 24 34 44 54 64 74 84} P5 directed:True)
        (track "Track6" {95 85 75 65 55 45 35 25 15 5 15 25 35 45 55 65 75 85 95 85 75 65 55 45 35 25 15 5 15 25 35 45 55 65 75 85 95 85 75 65 55 45 35 25 15 5 15 25 35 45 55 65 75 85} P6 directed:True)
        (track "Track7" {96 86 76 66 56 46 36 26 16 6 16 26 36 46 56 66 76 86 96 86 76 66 56 46 36 26 16 6 16 26 36 46 56 66 76 86 96 86 76 66 56 46 36 26 16 6 16 26 36 46 56 66 76 86} P7 directed:True)
        (track "Track8" {97 87 77 67 57 47 37 27 17 7 17 27 37 47 57 67 77 87 97 87 77 67 57 47 37 27 17 7 17 27 37 47 57 67 77 87 97 87 77 67 57 47 37 27 17 7 17 27 37 47 57 67 77 87} P8 directed:True)
        (track "Track9" {98 88 78 68 58 48 38 28 18 8 18 28 38 48 58 68 78 88 98 88 78 68 58 48 38 28 18 8 18 28 38 48 58 68 78 88 98 88 78 68 58 48 38 28 18 8 18 28 38 48 58 68 78 88} P9 directed:True)
        (track "Track10" {99 89 79 69 59 49 39 29 19 9 19 29 39 49 59 69 79 89 99 89 79 69 59 49 39 29 19 9 19 29 39 49 59 69 79 89 99 89 79 69 59 49 39 29 19 9 19 29 39 49 59 69 79 89} P10 directed:True)
        }
        >
    "The game involves 10 players.")

})

//------------------------------------------------------------------------------

(rulesets {

    (ruleset "Ruleset/Paradis (Observed)" {
        "Players/8"
        }
        variations:{"Players/2" "Players/4"
        "Players/6" "Players/10"
        }
    )*

})

//------------------------------------------------------------------------------

(metadata

    (info
        {
        (description "Paradis is a race game played by boys, men, and married women in Mali. Players attempt to reach Paradise, in the center of the board, three times.")
        (rules "Nine concentric circles. Any number of players. Each player plays as one piece. Two nut shells, used as dice. The values are as follows: two round sides = 2; two hollow sides = 1; one of each side = 0. Players move their pieces from outside the circles into progressive rings until they reach Paradise at the center, at which point the piece goes back to the outside of the board. The first player to reach Paradise three times wins.")
        (source "Béart 1955: 432.")
        (version "1.3.0")
        (classification "board/race/reach")
        (credit "Eric Piette")
        (origin  "This game was played in Mali, around 1955.")
        }
    )

    (graphics {
        (hand Placement Shared scale:0.2 offsetX:0.05 offsetY:0.95)
        (show Edges Hidden)
        (board Colour OuterVertices (colour Hidden))
        (board Colour InnerVertices (colour Hidden))
        (board Background image:"disc.svg" fillColour:(colour 153 76 0) edgeColour:(colour 153 76 0) scale:0.96)
        (board Background image:"disc.svg" fillColour:(colour 223 178 110) edgeColour:(colour 223 178 110) scale:0.95)
        (board Background image:"disc.svg" fillColour:(colour 153 76 0) edgeColour:(colour 153 76 0) scale:0.86)
        (board Background image:"disc.svg" fillColour:(colour 223 178 110) edgeColour:(colour 223 178 110) scale:0.85)
        (board Background image:"disc.svg" fillColour:(colour 153 76 0) edgeColour:(colour 153 76 0) scale:0.76)
        (board Background image:"disc.svg" fillColour:(colour 223 178 110) edgeColour:(colour 223 178 110) scale:0.75)
        (board Background image:"disc.svg" fillColour:(colour 153 76 0) edgeColour:(colour 153 76 0) scale:0.66)
        (board Background image:"disc.svg" fillColour:(colour 223 178 110) edgeColour:(colour 223 178 110) scale:0.65)
        (board Background image:"disc.svg" fillColour:(colour 153 76 0) edgeColour:(colour 153 76 0) scale:0.56)
        (board Background image:"disc.svg" fillColour:(colour 223 178 110) edgeColour:(colour 223 178 110) scale:0.55)
        (board Background image:"disc.svg" fillColour:(colour 153 76 0) edgeColour:(colour 153 76 0) scale:0.46)
        (board Background image:"disc.svg" fillColour:(colour 223 178 110) edgeColour:(colour 223 178 110) scale:0.45)
        (board Background image:"disc.svg" fillColour:(colour 153 76 0) edgeColour:(colour 153 76 0) scale:0.36)
        (board Background image:"disc.svg" fillColour:(colour 223 178 110) edgeColour:(colour 223 178 110) scale:0.35)
        (board Background image:"disc.svg" fillColour:(colour 153 76 0) edgeColour:(colour 153 76 0) scale:0.26)
        (board Background image:"disc.svg" fillColour:(colour 223 178 110) edgeColour:(colour 223 178 110) scale:0.25)
        (board Background image:"disc.svg" fillColour:(colour 153 76 0) edgeColour:(colour 153 76 0) scale:0.16)
        (board Background image:"disc.svg" fillColour:(colour 223 178 110) edgeColour:(colour 223 178 110) scale:0.15)
        (board Placement scale:1.2)
    })

)
