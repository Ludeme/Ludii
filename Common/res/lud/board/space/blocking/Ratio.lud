(game "Ratio"
    (players {(player S) (player N)})
    <Game:equipment>
    (rules
        <Game:start>
        <Game:play>
        <Game:end>
    )
)

//------------------------------------------------------------------------------

(option "Game" <Game> args:{ <equipment> <start> <play> <end>}
    {
    (item "Game I" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                        })
                        vertices:{3 5 1}
                    )
                    edges:{{0 3} {1 5} {2 7} {0 1}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 
                (move Step Adjacent 
                    (to 
                        if:(and
                            (if (= 1 (count Turns)) (!= (centrePoint) (to)) True)
                            (is Empty (to))
                        )
                    )
                )
            )
            (piece "Gnome" P2 (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to)))))
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (expand (sites Top)))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main" (play (forEach Piece)))
        }
        >
        <
        (end {
            (if (no Moves P1) (result P2 Win))
            (if (is In (where "Foot" P1) (sites P2)) (result P1 Win))
        }) 
        >
        "The rules of the game I."
    )* 
    
    (item "Game II" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                        })
                        vertices:{3 5}
                    )
                    edges:{{0 4} {2 6}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 (move Step Adjacent (to if:(is Empty (to)))))
            (piece "Gnome" P2 (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to)))))
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main" (play (forEach Piece)))
        }
        >
        <
        (end {
            (if (no Moves P1) (result P2 Win))
            (if (is In (where "Foot" P1) (sites P2)) (result P1 Win))
        }) 
        >
        "The rules of the game II."
    ) 
    
    (item "Game III" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                        })
                        vertices:{1}
                    )
                    edges:{{0 1} {3 9}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 (move Step Adjacent (to if:(is Empty (to)))))
            (piece "Gnome" P2 (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to)))))
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main" (play (forEach Piece)))
        }
        >
        <
        (end {
            (if (no Moves P1) (result P2 Win))
            (if (is In (where "Foot" P1) (sites P2)) (result P1 Win))
        }) 
        >
        "The rules of the game III."
    )
    
    (item "Game IV" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                        })
                        vertices:{7}
                    )
                    edges:{{6 7} {8 4}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 (move Step Adjacent (to if:(is Empty (to)))))
            (piece "Gnome" P2 (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to)))))
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main" (play (forEach Piece)))
        }
        >
        <
        (end {
            (if (no Moves P1) (result P2 Win))
            (if (is In (where "Foot" P1) (sites P2)) (result P1 Win))
        }) 
        >
        "The rules of the game IV."
    )
    
    (item "Game V" 
        <
        (equipment {
            (board
                (merge {
                    (rectangle 3 3 diagonals:Alternating) 
                    (shift 0 2 (wedge 2)) 
                    (shift 0 -1 (rotate 180 (wedge 2))) 
                })
                use:Vertex
            )
            
            (piece "Foot" P1 (move Step Adjacent (to if:(is Empty (to)))))
            (piece "Gnome" P2 (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to)))))
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main" (play (forEach Piece)))
        }
        >
        <
        (end {
            (if (no Moves P1) (result P2 Win))
            (if (is In (where "Foot" P1) (sites P2)) (result P1 Win))
        }) 
        >
        "The rules of the game V."
    )
    
    (item "Game VI" 
        <
        (equipment {
            (board
                (merge {
                    (rectangle 3 3 diagonals:Alternating) 
                    (shift 0 2 (wedge 2)) 
                    (shift 0 -1 (rotate 180 (wedge 2))) 
                })
                use:Vertex
            )
            
            (piece "Foot" P1 (move Step Adjacent (to if:(is Empty (to)))))
            (piece "Gnome" P2 
                (move Step 
                    (from (from) if:(= 0 (state at:(from))))
                    (directions {Forwards Rightward Leftward})
                    (to if:(is Empty (to)))
                    (then
                        (if (all Sites (difference (sites Occupied by:Mover) (last To)) if:(!= 0 (state at:(site))))
                            (forEach Site
                                (sites Occupied by:Mover)
                                (set State at:(site) 0)
                            )
                            (and
                                (set State at:(last To) 1)
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (union (sites Centre) (intersection (sites Board) (expand (sites Bottom))))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main" (play (forEach Piece)))
        }
        >
        <
        (end {
            (if (and (= (count MovesThisTurn) 2) (no Moves Next)) (result P2 Win))
            (if (or (no Moves P2) (is In (where "Foot" P1) (sites P2))) (result P1 Win))
        }) 
        >
        "The rules of the game VI."
    )
    
    (item "Game VII" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                        })
                        vertices:{1 3 5 7}
                    )
                    edges:{{0 3} {1 4} {2 6} {2 5} {0 1} {3 4}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 
                (or
                    (move Step Adjacent (to if:(is Empty (to))))
                    (move Hop Adjacent
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                    )
                )
            )
            (piece "Gnome" P2
                (or
                    (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                    (move Hop 
                        (directions {Forwards Rightward Leftward})
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                    )
                )
            )
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main" (play (forEach Piece)))
        }
        >
        <
        (end {
            (if (no Moves P2) (result P1 Win))
            (if (= Off (where "Foot" P1)) (result P2 Win))
        }) 
        >
        "The rules of the game VII."
    )
    
    (item "Game VIII" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                        })
                        vertices:{7 3 5}
                    )
                    edges:{{0 4} {2 5} {4 5} {3 6}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 
                (or
                    (move Step Adjacent (to if:(is Empty (to))))
                    (move Hop Adjacent
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                        (then
                            (if 
                                (can Move
                                    (hop 
                                        (from (last To))
                                        Adjacent
                                        (between if:("IsEnemyAt" (between)))
                                        (to if:(is Empty (to)))	
                                    )
                                )
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            (piece "Gnome" P2
                (or
                    (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                    (move Hop 
                        (directions {Forwards Rightward Leftward})
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                    )
                )
            )
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main"
            (play 
                (if (and (!= 1 (count Turns)) ("SameTurn"))
                    (or
                        (move Hop 
                            (from (last To))
                            Adjacent
                            (between if:("IsEnemyAt" (between)))
                            (to if:(is Empty (to)) (apply (remove (between))))	
                            (then
                                (if 
                                    (can Move
                                        (hop 
                                            (from (last To))
                                            Adjacent
                                            (between if:("IsEnemyAt" (between)))
                                            (to if:(is Empty (to)))	
                                        )
                                    )
                                    (moveAgain)
                                )
                            )
                        )
                        (move Pass)
                    )
                    (forEach Piece)
                )
            )
        )
        }
        >
        <
        (end {
            (if (no Moves P2) (result P1 Win))
            (if (= Off (where "Foot" P1)) (result P2 Win))
        }) 
        >
        "The rules of the game VIII."
    )
    
    (item "Game IX" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                        })
                        vertices:{1 3 5}
                    )
                    edges:{{0 3} {1 5} {7 2} {0 1}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 
                (or
                    (move Step Adjacent (to if:(is Empty (to))))
                    (move Hop Adjacent
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                        (then
                            (if 
                                (can Move
                                    (hop 
                                        (from (last To))
                                        Adjacent
                                        (between if:("IsEnemyAt" (between)))
                                        (to if:(is Empty (to)))	
                                    )
                                )
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            (piece "Gnome" P2
                (or
                    (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                    (move Hop 
                        (directions {BR BL Forwards Rightward Leftward})
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                    )
                )
            )
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main"
            (play 
                (if (and (!= 1 (count Turns)) ("SameTurn"))
                    (or
                        (move Hop 
                            (from (last To))
                            Adjacent
                            (between if:("IsEnemyAt" (between)))
                            (to if:(is Empty (to)) (apply (remove (between))))	
                            (then
                                (if 
                                    (can Move
                                        (hop 
                                            (from (last To))
                                            Adjacent
                                            (between if:("IsEnemyAt" (between)))
                                            (to if:(is Empty (to)))	
                                        )
                                    )
                                    (moveAgain)
                                )
                            )
                        )
                        (move Pass)
                    )
                    (forEach Piece)
                )
            )
        )
        }
        >
        <
        (end {
            (if (no Moves P2) (result P1 Win))
            (if (= Off (where "Foot" P1)) (result P2 Win))
        }) 
        >
        "The rules of the game IX."
    )
    
    (item "Game X" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                        })
                        vertices:{3 5}
                    )
                    edges:{{0 4} {2 6}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 
                (or
                    (move Step Adjacent (to if:(is Empty (to))))
                    (move Hop Adjacent
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                        (then
                            (if 
                                (can Move
                                    (hop 
                                        (from (last To))
                                        Adjacent
                                        (between if:("IsEnemyAt" (between)))
                                        (to if:(is Empty (to)))	
                                    )
                                )
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            (piece "Gnome" P2
                (or
                    (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                    (move Hop 
                        (directions {Forwards Rightward Leftward})
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                    )
                )
            )
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main"
            (play 
                (if (and (!= 1 (count Turns)) ("SameTurn"))
                    (or
                        (move Hop 
                            (from (last To))
                            Adjacent
                            (between if:("IsEnemyAt" (between)))
                            (to if:(is Empty (to)) (apply (remove (between))))	
                            (then
                                (if 
                                    (can Move
                                        (hop 
                                            (from (last To))
                                            Adjacent
                                            (between if:("IsEnemyAt" (between)))
                                            (to if:(is Empty (to)))	
                                        )
                                    )
                                    (moveAgain)
                                )
                            )
                        )
                        (move Pass)
                    )
                    (forEach Piece)
                )
            )
        )
        }
        >
        <
        (end {
            (if (no Moves P2) (result P1 Win))
            (if (= Off (where "Foot" P1)) (result P2 Win))
        }) 
        >
        "The rules of the game X."
    )
    
    (item "Game XI" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                        })
                        vertices:{3 5}
                    )
                    edges:{{0 4} {2 6}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 
                (or
                    (move Step Adjacent (to if:(is Empty (to))))
                    (move Hop Adjacent
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                        (then
                            (if 
                                (can Move
                                    (hop 
                                        (from (last To))
                                        Adjacent
                                        (between if:("IsEnemyAt" (between)))
                                        (to if:(is Empty (to)))	
                                    )
                                )
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            (piece "Gnome" P2
                (or
                    (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                    (move Hop 
                        (directions {BR BL FL FR Rightward Leftward})
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                    )
                )
            )
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main"
            (play 
                (if (and (!= 1 (count Turns)) ("SameTurn"))
                    (or
                        (move Hop 
                            (from (last To))
                            Adjacent
                            (between if:("IsEnemyAt" (between)))
                            (to if:(is Empty (to)) (apply (remove (between))))	
                            (then
                                (if 
                                    (can Move
                                        (hop 
                                            (from (last To))
                                            Adjacent
                                            (between if:("IsEnemyAt" (between)))
                                            (to if:(is Empty (to)))	
                                        )
                                    )
                                    (moveAgain)
                                )
                            )
                        )
                        (move Pass)
                    )
                    (forEach Piece)
                )
            )
        )
        }
        >
        <
        (end {
            (if (no Moves P2) (result P1 Win))
            (if (= Off (where "Foot" P1)) (result P2 Win))
        }) 
        >
        "The rules of the game XI."
    )
    
    (item "Game XII" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                        })
                        vertices:{7}
                    )
                    edges:{{4 8} {6 7}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 
                (or
                    (move Step Adjacent (to if:(is Empty (to))))
                    (move Hop Adjacent
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                        (then
                            (if 
                                (can Move
                                    (hop 
                                        (from (last To))
                                        Adjacent
                                        (between if:("IsEnemyAt" (between)))
                                        (to if:(is Empty (to)))	
                                    )
                                )
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            (piece "Gnome" P2
                (or
                    (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                    (move Hop 
                        (directions {BR BL FL FR Rightward Leftward})
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                    )
                )
            )
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main"
            (play 
                (if (and (!= 1 (count Turns)) ("SameTurn"))
                    (or
                        (move Hop 
                            (from (last To))
                            Adjacent
                            (between if:("IsEnemyAt" (between)))
                            (to if:(is Empty (to)) (apply (remove (between))))	
                            (then
                                (if 
                                    (can Move
                                        (hop 
                                            (from (last To))
                                            Adjacent
                                            (between if:("IsEnemyAt" (between)))
                                            (to if:(is Empty (to)))	
                                        )
                                    )
                                    (moveAgain)
                                )
                            )
                        )
                        (move Pass)
                    )
                    (forEach Piece)
                )
            )
        )
        }
        >
        <
        (end {
            (if (no Moves P2) (result P1 Win))
            (if (= Off (where "Foot" P1)) (result P2 Win))
        }) 
        >
        "The rules of the game XII."
    )
    
    (item "Game XIII" 
        <
        (equipment {
            (board
                (add
                    (remove
                        (merge {
                            (rectangle 3 3 diagonals:Alternating) 
                            (shift 0 2 (wedge 2)) 
                            (shift 0 -1 (rotate 180 (wedge 2))) 
                        })
                        vertices:{1}
                    )
                    edges:{{0 1} {3 9}}
                )
                use:Vertex
            )
            
            (piece "Foot" P1 
                (or
                    (move Step Adjacent (to if:(is Empty (to))))
                    (move Hop Adjacent
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                        (then
                            (if 
                                (can Move
                                    (hop 
                                        (from (last To))
                                        Adjacent
                                        (between if:("IsEnemyAt" (between)))
                                        (to if:(is Empty (to)))	
                                    )
                                )
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            (piece "Gnome" P2
                (or
                    (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                    (move Hop 
                        (directions {Forward Rightward Leftward})
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                    )
                )
            )
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main"
            (play 
                (if (and (!= 1 (count Turns)) ("SameTurn"))
                    (or
                        (move Hop 
                            (from (last To))
                            Adjacent
                            (between if:("IsEnemyAt" (between)))
                            (to if:(is Empty (to)) (apply (remove (between))))	
                            (then
                                (if 
                                    (can Move
                                        (hop 
                                            (from (last To))
                                            Adjacent
                                            (between if:("IsEnemyAt" (between)))
                                            (to if:(is Empty (to)))	
                                        )
                                    )
                                    (moveAgain)
                                )
                            )
                        )
                        (move Pass)
                    )
                    (forEach Piece)
                )
            )
        )
        }
        >
        <
        (end {
            (if (no Moves P2) (result P1 Win))
            (if (= Off (where "Foot" P1)) (result P2 Win))
        }) 
        >
        "The rules of the game XIII."
    )
    
    (item "Game XIV" 
        <
        (equipment {
            (board
                (merge {
                    (rectangle 3 3 diagonals:Alternating) 
                    (shift 0 2 (wedge 2)) 
                    (shift 0 -1 (rotate 180 (wedge 2))) 
                })
                use:Vertex
            )
            
            (piece "Foot" P1 
                (or
                    (move Step Adjacent (to if:(is Empty (to))))
                    (move Hop Adjacent
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                        (then
                            (if 
                                (can Move
                                    (hop 
                                        (from (last To))
                                        Adjacent
                                        (between if:("IsEnemyAt" (between)))
                                        (to if:(is Empty (to)))	
                                    )
                                )
                                (moveAgain)
                            )
                        )
                    )
                )
            )
            (piece "Gnome" P2
                (or
                    (move Step (directions {Forwards Rightward Leftward}) (to if:(is Empty (to))))
                    (move Hop 
                        (directions {Forward Rightward Leftward})
                        (between if:("IsEnemyAt" (between)))
                        (to if:(is Empty (to))
                            (apply (remove (between)))
                        )
                    )
                )
            )
            (hand P1)
            (regions "Home" P2 (intersection (sites Outer) (expand (sites Bottom))))
            (regions "Home" P1 (sites Top))
        })
        > 
        <
        (start {
            (place "Gnome2" (intersection (sites Outer) (expand (sites Bottom))))
            (place "Foot1" (handSite P1))
        })
        >
        <
        phases:{
        (phase "Opening"
            (play
                (move 
                    (from (handSite Mover))
                    (to (difference (sites Board) (intersection (sites Outer) (expand (sites Bottom)))))
                    (then (moveAgain))
                )
            )
            (nextPhase "Main")
        )
        (phase "Main"
            (play 
                (if (and (!= 1 (count Turns)) ("SameTurn"))
                    (or
                        (move Hop 
                            (from (last To))
                            Adjacent
                            (between if:("IsEnemyAt" (between)))
                            (to if:(is Empty (to)) (apply (remove (between))))	
                            (then
                                (if 
                                    (can Move
                                        (hop 
                                            (from (last To))
                                            Adjacent
                                            (between if:("IsEnemyAt" (between)))
                                            (to if:(is Empty (to)))	
                                        )
                                    )
                                    (moveAgain)
                                )
                            )
                        )
                        (move Pass)
                    )
                    (forEach Piece)
                )
            )
        )
        }
        >
        <
        (end {
            (if (no Moves P2) (result P1 Win))
            (if (= Off (where "Foot" P1)) (result P2 Win))
        }) 
        >
        "The rules of the game XIV."
    )
})

//------------------------------------------------------------------------------

(rulesets { 
    
    (ruleset "Ruleset/Game I Simple Blocking Game (Described)" {
        "Game/Game I"
    })*
    
    (ruleset "Ruleset/Game II Second Blocking Game (Described)" {
        "Game/Game II"
    })
    
    (ruleset "Ruleset/Game III Blocking Game with all sites except the bottom centre (Described)" {
        "Game/Game III"
    })
    
    (ruleset "Ruleset/Game IV Blocking Game except the centre top site (Described)" {
        "Game/Game IV"
    })
    
    (ruleset "Ruleset/Game V Blocking Game with all sites (Described)" {
        "Game/Game V"
    })
    
    (ruleset "Ruleset/Game VI Modified Blocking Game with all sites (Described)" {
        "Game/Game VI"
    })
    
    (ruleset "Ruleset/Game VII Easy Capturing Game (Described)" {
        "Game/Game VII"
    })
    
    (ruleset "Ruleset/Game VIII Second Capturing Game (Described)" {
        "Game/Game VIII"
    })
    
    (ruleset "Ruleset/Game IX Third Capturing Game (Described)" {
        "Game/Game IX"
    })
    
    (ruleset "Ruleset/Game X Fourth Capturing Game (Described)" {
        "Game/Game X"
    })
    
    (ruleset "Ruleset/Game XI Fifth Capturing Game (Described)" {
        "Game/Game XI"
    })
    
    (ruleset "Ruleset/Game XII Capturing Game with all sites except the top centre (Described)" {
        "Game/Game XII"
    })
    
    (ruleset "Ruleset/Game XIII Capturing Game with all sites except the bottom centre (Described)" {
        "Game/Game XIII"
    })
    
    (ruleset "Ruleset/Game XIV Capturing Game with all sites (Described)" {
        "Game/Game XIV"
    })
    
})

//------------------------------------------------------------------------------

(metadata 
    (info
        {
        (description "Ratio is a board game that can be played with many rulesets.")
        (useFor "Ruleset/Game I Simple Blocking Game (Described)" (rules "First, the giant takes place on one of the top sites. Centre site in the opening move for the giant is not allowed. In any subsequent moves, the giant is allowed to enter the centre.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board.
                
        The giant wins if it reaches the bottom sites and the dwarves win if they block the giant to move."))
        (useFor "Ruleset/Game I Simple Blocking Game (Described)" (id "1825"))
        (useFor "Ruleset/Game II Second Blocking Game (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board.
                
        The giant wins if it reaches the bottom sites and the dwarves win if they block the giant to move."))
        (useFor "Ruleset/Game II Second Blocking Game (Described)" (id "1826"))
        (useFor "Ruleset/Game III Blocking Game with all sites except the bottom centre (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board.
                
        The giant wins if it reaches the bottom sites and the dwarves win if they block the giant to move."))
        (useFor "Ruleset/Game III Blocking Game with all sites except the bottom centre (Described)" (id "1827"))
        (useFor "Ruleset/Game IV Blocking Game except the centre top site (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board.
                
        The giant wins if it reaches the bottom sites and the dwarves win if they block the giant to move."))
        (useFor "Ruleset/Game IV Blocking Game except the centre top site (Described)" (id "1828"))
        (useFor "Ruleset/Game V Blocking Game with all sites (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board.
                
        The giant wins if it reaches the bottom sites and the dwarves win if they block the giant to move."))
        (useFor "Ruleset/Game V Blocking Game with all sites (Described)" (id "1829"))
        (useFor "Ruleset/Game VI Modified Blocking Game with all sites (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board.
                
                At each dwarf turn, all dwarves must move and the condition to win for the dwarves is only checked after the three dwarves are moving.
                
        The giant wins if it reaches the bottom sites and the dwarves win if they block the giant to move."))
        (useFor "Ruleset/Game VI Modified Blocking Game with all sites (Described)" (id "1830"))
        (useFor "Ruleset/Game VII Easy Capturing Game (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board. The Giant can capture in hopping in all directions, the dwarves can capture on forwards.
                
        The giant wins if the dwarves have no moves and the dwarves win if they capture the giant."))
        (useFor "Ruleset/Game VII Easy Capturing Game (Described)" (id "1831"))
        (useFor "Ruleset/Game VIII Second Capturing Game (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board. The Giant can capture in hopping in all directions, the dwarves can capture on forwards.
                
        The giant wins if the dwarves have no moves and the dwarves win if they capture the giant."))
        (useFor "Ruleset/Game VIII Second Capturing Game (Described)" (id "1832"))
        (useFor "Ruleset/Game IX Third Capturing Game (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board. The Giant can capture in hopping in all directions, the dwarves can capture on forwards and diagonally backwards.
                
        The giant wins if the dwarves have no moves and the dwarves win if they capture the giant."))
        (useFor "Ruleset/Game IX Third Capturing Game (Described)" (id "1833"))
        (useFor "Ruleset/Game X Fourth Capturing Game (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board. The Giant can capture in hopping in all directions, the dwarves can capture on forwards.
                
        The giant wins if the dwarves have no moves and the dwarves win if they capture the giant."))
        (useFor "Ruleset/Game X Fourth Capturing Game (Described)" (id "1834"))
        (useFor "Ruleset/Game XI Fifth Capturing Game (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board. The Giant can capture in hopping in all directions, the dwarves can capture only diagonally.
                
        The giant wins if the dwarves have no moves and the dwarves win if they capture the giant."))
        (useFor "Ruleset/Game XI Fifth Capturing Game (Described)" (id "1835"))
        (useFor "Ruleset/Game XII Capturing Game with all sites except the top centre (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board. The Giant can capture in hopping in all directions, the dwarves can capture only diagonally.
                
        The giant wins if the dwarves have no moves and the dwarves win if they capture the giant."))
        (useFor "Ruleset/Game XII Capturing Game with all sites except the top centre (Described)" (id "1836"))
        (useFor "Ruleset/Game XIII Capturing Game with all sites except the bottom centre (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board. The Giant can capture in hopping in all directions, the dwarves can capture only straight forward.
                
        The giant wins if the dwarves have no moves and the dwarves win if they capture the giant."))
        (useFor "Ruleset/Game XIII Capturing Game with all sites except the bottom centre (Described)" (id "1837"))
        (useFor "Ruleset/Game XIV Capturing Game with all sites (Described)" (rules "First, the giant takes place on all empty sites.
                
                The Giant piece can step to an empty site, the dwarves can step only forward to the top of the board. The Giant can capture in hopping in all directions, the dwarves can capture only straight forward.
                
        The giant wins if the dwarves have no moves and the dwarves win if they capture the giant."))
        (useFor "Ruleset/Game XIV Capturing Game with all sites (Described)" (id "1838"))
        (source "<a href=\"https://www.stichtingspel.org/sites/default/files/agpi_quarterly_2017_fall_1-3_artikel_2_ratio.pdf\" target=\"_blank\" class=\"style1\" style=\"color: #0000EE\" />www.stichtingspel.org</a>
        ")
        (id "1825")
        (version "1.3.4")
        (classification "board/space/blocking")
        (author "Fred Schuh")
        (credit "Eric Piette")
        (date "1950")
        }
    )
    
    (graphics {
        (player Colour P1 (colour White))
        (player Colour P2 (colour White))
    })
    
)
